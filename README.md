# –ü—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è —á–µ—Ç—ã—Ä–µ—Ö–Ω–æ–≥–æ–≥–æ –∫–æ–ª–µ—Å–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞ StackForce

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ [`docs/`](docs/README.md)**

–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:
- üöÄ [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](docs/QUICKSTART.md)
- üîß [–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞](docs/CALIBRATION.md)
- ü¶ø [–°–∏—Å—Ç–µ–º–∞ –ø–æ—Ö–æ–¥–æ–∫](docs/GAIT_QUICKSTART.md)
- ‚öôÔ∏è [–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ](docs/HARDWARE.md)

---

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–ª–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è **—á–µ—Ç—ã—Ä–µ—Ö–Ω–æ–≥–æ–≥–æ –∫–æ–ª–µ—Å–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–¥–≤—É—Ö ESP32-S3 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤** (main –∏ aux), —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ CAN —à–∏–Ω—É.

> üì∫ **–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —É—Ä–æ–∫–∞—Ö ÁôªÂì• (Deng Ge)** - –º–æ–¥—É–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–ª–µ—Å–Ω–æ–≥–æ –∏ –Ω–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è.

**–ù–∞—à –ø–æ–¥—Ö–æ–¥:** –ì–∏–±—Ä–∏–¥–Ω–∞—è –∫–æ–ª–µ—Å–Ω–æ-–Ω–æ–∂–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ –∫–æ–ª–µ—Å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é –∞–¥–∞–ø—Ç–∞—Ü–∏—é –≤—ã—Å–æ—Ç—ã –Ω–æ–≥.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã v2.0

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –†–û–ë–û–¢ STACKFORCE                          ‚îÇ
‚îÇ            (–ß–µ—Ç—ã—Ä–µ—Ö–Ω–æ–≥–∏–π –∫–æ–ª–µ—Å–Ω—ã–π —Ä–æ–±–æ—Ç)                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         CAN BUS         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ESP32 MAIN         ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  ESP32 AUX         ‚îÇ
‚îÇ  (–ì–æ–ª–æ–≤–∞)           ‚îÇ    1 Mbps               ‚îÇ  (–•–≤–æ—Å—Ç)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                                                 ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇSBUS Receiver‚îÇ                                  ‚îÇ         ‚îÇ
    ‚îÇMPU6050 IMU  ‚îÇ                                  ‚îÇ         ‚îÇ
    ‚îÇPCA9685      ‚îÇ                                  ‚îÇ         ‚îÇ
    ‚îÇ  8x Servo   ‚îÇ ‚óÑ‚îÄ –í—Å–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã             ‚îÇ         ‚îÇ
    ‚îÇ             ‚îÇ    (4 –Ω–æ–≥–∏ √ó 2 —Å–µ—Ä–≤–æ)           ‚îÇ         ‚îÇ
    ‚îÇ2x BLDC(M0,M1‚îÇ                                  ‚îÇ2x BLDC  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                  ‚îÇ (M2,M3) ‚îÇ
                                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. ESP32 Main (–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä - –≥–æ–ª–æ–≤–∞)

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º SBUS —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç FrSky –ø—Ä–∏–µ–º–Ω–∏–∫–∞ (16 –∫–∞–Ω–∞–ª–æ–≤)
- ‚úÖ –ß—Ç–µ–Ω–∏–µ IMU (MPU6050) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–∑—ã
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ **–í–°–ï–ú–ò 8 —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏** —á–µ—Ä–µ–∑ PCA9685 (4 –Ω–æ–≥–∏ √ó 2 —Å–µ—Ä–≤–æ)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2 –ø–µ—Ä–µ–¥–Ω–∏–º–∏ BLDC –º–æ—Ç–æ—Ä–∞–º–∏ (M0, M1) —á–µ—Ä–µ–∑ Serial2
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞** –¥–ª—è –≤—Å–µ—Ö 4 –Ω–æ–≥ (5-–∑–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º)
- ‚úÖ **PID —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è** —Ç–∞–Ω–≥–∞–∂–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ aux –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –ø–æ CAN (throttle, turn, height, roll, pitch)

### 2. ESP32 Aux (–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä - —Ö–≤–æ—Å—Ç)

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–∏–µ–º –∫–æ–º–∞–Ω–¥ –æ—Ç main –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–æ CAN
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2 –∑–∞–¥–Ω–∏–º–∏ BLDC –º–æ—Ç–æ—Ä–∞–º–∏ (M2, M3) —á–µ—Ä–µ–∑ Serial2
- ‚úÖ –ê–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ (500ms timeout)
- ‚ùå –ù–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ (–≤—Å–µ —Å–µ—Ä–≤–æ –Ω–∞ main)

## –ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞ –∏ –ü–æ—Ö–æ–¥–∫–∏

### –ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞ –Ω–æ–≥

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –î–ª–∏–Ω–∞ –ø–ª–µ—á–∞: 50 –º–º
- –î–ª–∏–Ω–∞ –±–µ–¥—Ä–∞: 100 –º–º  
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Å—è–≥–∞–µ–º–æ—Å—Ç—å: 150 –º–º

**–ê–ª–≥–æ—Ä–∏—Ç–º—ã:**
1. **–ü—Ä—è–º–∞—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞**: —É–≥–ª—ã —Å–µ—Ä–≤–æ ‚Üí –ø–æ–∑–∏—Ü–∏—è –∫–æ–Ω—Ü–∞ –Ω–æ–≥–∏
2. **–û–±—Ä–∞—Ç–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞**: –ø–æ–∑–∏—Ü–∏—è –∫–æ–Ω—Ü–∞ –Ω–æ–≥–∏ ‚Üí —É–≥–ª—ã —Å–µ—Ä–≤–æ
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Å–∏–Ω—É—Å–Ω—É—é —Ç–µ–æ—Ä–µ–º—É
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—è–≥–∞–µ–º–æ—Å—Ç–∏ —Ü–µ–ª–∏
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–≥–ª–æ–≤ –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö

### –ü–æ—Ö–æ–¥–∫–∏ (Gaits)

| –ü–æ—Ö–æ–¥–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –°–∫–æ—Ä–æ—Å—Ç—å | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å |
|---------|----------|----------|--------------|
| **STAND** | –°—Ç–æ–π–∫–∞ –Ω–∞ –º–µ—Å—Ç–µ | - | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è |
| **WALK** | –®–∞–≥ | –ú–µ–¥–ª–µ–Ω–Ω–∞—è | –í—ã—Å–æ–∫–∞—è |
| **TROT** | –†—ã—Å—å (–¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä—ã) | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω—è—è |
| **BOUND** | –ì–∞–ª–æ–ø (–ø–µ—Ä–µ–¥–Ω–∏–µ/–∑–∞–¥–Ω–∏–µ –ø–∞—Ä—ã) | –ë—ã—Å—Ç—Ä–∞—è | –ù–∏–∑–∫–∞—è |

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Ö–æ–¥–æ–∫:**
- –í—ã—Å–æ—Ç–∞ —à–∞–≥–∞: 30 –º–º
- –î–ª–∏–Ω–∞ —à–∞–≥–∞: 80 –º–º (–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏)
- –ü–µ—Ä–∏–æ–¥ —Ü–∏–∫–ª–∞: 1000 –º—Å
- –í—ã—Å–æ—Ç–∞ —Ç–µ–ª–∞: 100 –º–º

**–§–∞–∑–æ–≤—ã–µ —Å–º–µ—â–µ–Ω–∏—è:**
```cpp
// –§–æ—Ä–º–∞—Ç: [FL, FR, BL, BR]
WALK:  [0.0, 0.5, 0.75, 0.25]  // –í—Å–µ–≥–¥–∞ 3 –Ω–æ–≥–∏ –Ω–∞ –∑–µ–º–ª–µ
TROT:  [0.0, 0.5, 0.5, 0.0]    // –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä—ã
BOUND: [0.0, 0.0, 0.5, 0.5]    // –ü–µ—Ä–µ–¥–Ω–∏–µ –∏ –∑–∞–¥–Ω–∏–µ –ø–∞—Ä—ã
```

## CAN —à–∏–Ω–∞

### –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–≤—è–∑–∏

**–°–∫–æ—Ä–æ—Å—Ç—å:** 1 Mbps

**CAN ID —Å–æ–æ–±—â–µ–Ω–∏–π:**

| ID | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|-------------|----------|
| 0x110 | Main ‚Üí Aux | –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
| 0x120 | Aux ‚Üí Main | –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è |
| 0x141 | Main ‚Üí Motor FL | –ü–µ—Ä–µ–¥–Ω–∏–π –ª–µ–≤—ã–π BLDC |
| 0x142 | Main ‚Üí Motor FR | –ü–µ—Ä–µ–¥–Ω–∏–π –ø—Ä–∞–≤—ã–π BLDC |
| 0x143 | Aux ‚Üí Motor BL | –ó–∞–¥–Ω–∏–π –ª–µ–≤—ã–π BLDC |
| 0x144 | Aux ‚Üí Motor BR | –ó–∞–¥–Ω–∏–π –ø—Ä–∞–≤—ã–π BLDC |

### –§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Main ‚Üí Aux)

```
–ë–∞–π—Ç 0: throttle + 100  (0..200, —Ü–µ–Ω—Ç—Ä 100)
–ë–∞–π—Ç 1: steering + 100  (0..200, —Ü–µ–Ω—Ç—Ä 100)
–ë–∞–π—Ç 2: mode (0..255, –≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–π–∫–∏)
–ë–∞–π—Ç 3: speed (0..255, –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏)
–ë–∞–π—Ç 4-5: roll * 10 (int16, –≥—Ä–∞–¥—É—Å—ã * 10)
–ë–∞–π—Ç 6-7: pitch * 10 (int16, –≥—Ä–∞–¥—É—Å—ã * 10)
```

## PPM –∫–∞–Ω–∞–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

| –ö–∞–Ω–∞–ª | –§—É–Ω–∫—Ü–∏—è | –î–∏–∞–ø–∞–∑–æ–Ω |
|-------|---------|----------|
| 0 | –ì–∞–∑ (–≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥) | -100..100 |
| 1 | –†—É–ª–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | -100..100 |
| 2 | –†–µ–∂–∏–º (–≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–π–∫–∏) | 0..255 |
| 3 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ | 0..255 |
| 4 | AUX1 (—Ä–µ–∑–µ—Ä–≤) | - |
| 5 | AUX2 (—Ä–µ–∑–µ—Ä–≤) | - |

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [PlatformIO](https://platformio.org/) + VS Code
- 2x ESP32 DevKit
- 2x CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä (MCP2551/TJA1050)
- 2x PCA9685 (16-–∫–∞–Ω–∞–ª—å–Ω—ã–π PWM)
- 1x MPU6050 (IMU)
- 4x BLDC –º–æ—Ç–æ—Ä —Å CAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- 8x –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ (MG996R –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- 1x PPM RC –ø—Ä–∏–µ–º–Ω–∏–∫
- –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è (Li-Po 3S, 11.1V)

### –ü—Ä–æ—à–∏–≤–∫–∞ Main –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

```bash
cd firmware/main_controller
pio run --target upload
pio device monitor
```

### –ü—Ä–æ—à–∏–≤–∫–∞ Aux –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

```bash
cd firmware/aux_controller
pio run --target upload
pio device monitor
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### Main –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (ESP32 #1)

```
ESP32 Main
‚îú‚îÄ‚îÄ GPIO 34 ‚Üí PPM –≤—Ö–æ–¥ (–æ—Ç RC –ø—Ä–∏–µ–º–Ω–∏–∫–∞)
‚îú‚îÄ‚îÄ GPIO 21 ‚Üí SDA (PCA9685 + MPU6050)
‚îú‚îÄ‚îÄ GPIO 22 ‚Üí SCL (PCA9685 + MPU6050)
‚îú‚îÄ‚îÄ GPIO 5  ‚Üí CAN TX (–∫ MCP2551)
‚îú‚îÄ‚îÄ GPIO 4  ‚Üí CAN RX (–æ—Ç MCP2551)
‚îú‚îÄ‚îÄ GPIO 2  ‚Üí LED —Å—Ç–∞—Ç—É—Å
‚îú‚îÄ‚îÄ GPIO 16 ‚Üí LED PPM
‚îú‚îÄ‚îÄ GPIO 15 ‚Üí LED CAN
‚îî‚îÄ‚îÄ GPIO 17 ‚Üí LED IMU
```

### Aux –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (ESP32 #2)

```
ESP32 Aux
‚îú‚îÄ‚îÄ GPIO 21 ‚Üí SDA (PCA9685)
‚îú‚îÄ‚îÄ GPIO 22 ‚Üí SCL (PCA9685)
‚îú‚îÄ‚îÄ GPIO 5  ‚Üí CAN TX (–∫ MCP2551)
‚îú‚îÄ‚îÄ GPIO 4  ‚Üí CAN RX (–æ—Ç MCP2551)
‚îú‚îÄ‚îÄ GPIO 2  ‚Üí LED —Å—Ç–∞—Ç—É—Å
‚îî‚îÄ‚îÄ GPIO 15 ‚Üí LED CAN
```

### CAN —à–∏–Ω–∞

```
ESP32 Main  ‚îÄ‚îÄ[MCP2551]‚îÄ‚îÄ CANH/CANL ‚îÄ‚îÄ[120Œ©]
                            ‚îÇ
ESP32 Aux   ‚îÄ‚îÄ[MCP2551]‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                            ‚îÇ
4x BLDC     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îî‚îÄ[120Œ© —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä –Ω–∞ –∫–æ–Ω—Ü–∞—Ö]
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

1. **–í–∫–ª—é—á–µ–Ω–∏–µ**: –ü–æ–¥–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –Ω–∞ –æ–±–∞ ESP32 –∏ –º–æ—Ç–æ—Ä—ã
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏**: –°–≤–µ—Ç–æ–¥–∏–æ–¥—ã –¥–æ–ª–∂–Ω—ã –º–∏–≥–∞—Ç—å
3. **RC —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
   - –ö–∞–Ω–∞–ª 0 (–≥–∞–∑): –≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥
   - –ö–∞–Ω–∞–ª 1 (—Ä—É–ª—å): –ø–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ
   - –ö–∞–Ω–∞–ª 2 (—Ä–µ–∂–∏–º): –≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–π–∫–∏
   - –ö–∞–Ω–∞–ª 3 (—Å–∫–æ—Ä–æ—Å—Ç—å): –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

**–°—Ç–æ–π–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**
- –í—Å–µ 4 –Ω–æ–≥–∏ –Ω–∞ –∑–µ–º–ª–µ
- –í—ã—Å–æ—Ç–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –∫–∞–Ω–∞–ª–æ–º MODE

**–î–≤–∏–∂–µ–Ω–∏–µ:**
- –ì–∞–∑ + —Ä—É–ª—å = –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–æ—Ö–æ–¥–∫–∏ –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ PPM —Å–∏–≥–Ω–∞–ª–∞ (>500–º—Å) ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ CAN —Å–≤—è–∑–∏ (>1000–º—Å) ‚Üí –∞–≤–∞—Ä–∏–π–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∞–ª—ã—Ö —Å–∫–æ—Ä–æ—Å—Ç–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤–∞—Ä–∏–π–Ω—ã–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å

## –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞

### –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –æ—Ñ—Å–µ—Ç–æ–≤ (–ù–û–í–û–ï!)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –ø—Ä–æ—à–∏–≤–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ñ—Å–µ—Ç–æ–≤:

```bash
cd firmware/servo_calibration
pio run --target upload
pio device monitor -b 115200
```

**–ü—Ä–æ—à–∏–≤–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç:**
- üìä **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –≤—ã–≤–æ–¥** —Ç–µ–∫—É—â–∏—Ö —É–≥–ª–æ–≤ –∏ –æ—Ñ—Å–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å (–∫–∞–∂–¥—ã–µ 100 –º—Å)
- üéÆ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Serial** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–≥–ª–æ–≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–æ –∏–ª–∏ –≤—Å–µ—Ö —Å—Ä–∞–∑—É
- üìù **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç** –æ—Ñ—Å–µ—Ç–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (90¬∞)
- üíæ **–ì–æ—Ç–æ–≤—ã–π –∫–æ–¥** –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤ config.h –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—à–∏–≤–∫–∏

**–ö–æ–º–∞–Ω–¥—ã Serial:**
```
s0 90        # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–æ 0 –≤ 90¬∞
a 90         # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –í–°–ï —Å–µ—Ä–≤–æ –≤ 90¬∞
n            # –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (90¬∞)
h            # –°–ø—Ä–∞–≤–∫–∞
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
–°–µ—Ä–≤–æ          | –£–≥–æ–ª  | –û—Ñ—Å–µ—Ç | –ö–∞–Ω–∞–ª
----------------------------------------
FL_SHOULDER    |  90¬∞  |   +0¬∞ | CH0
FL_HIP         | 120¬∞  |  +30¬∞ | CH1
FR_SHOULDER    |  85¬∞  |   -5¬∞ | CH2
...

#define SERVO_FL_SHOULDER_OFFSET +0
#define SERVO_FL_HIP_OFFSET +30
#define SERVO_FR_SHOULDER_OFFSET -5
```

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [firmware/servo_calibration/README.md](firmware/servo_calibration/README.md)

#### –†—É—á–Ω–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞

–ò–∑–º–µ–Ω–∏—Ç–µ –≤ `config.h`:
```cpp
#define SERVO_MIN_PULSE 150    // –ú–∏–Ω–∏–º—É–º
#define SERVO_MAX_PULSE 600    // –ú–∞–∫—Å–∏–º—É–º
#define SERVO_SHOULDER_OFFSET 0  // –°–º–µ—â–µ–Ω–∏–µ –ø–ª–µ—á–∞
#define SERVO_HIP_OFFSET 0       // –°–º–µ—â–µ–Ω–∏–µ –±–µ–¥—Ä–∞
```

### –ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞

–ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –Ω–æ–≥:
```cpp
#define LEG_SHOULDER_LENGTH 50.0  // –º–º
#define LEG_HIP_LENGTH 100.0      // –º–º
```

### IMU —Ñ–∏–ª—å—Ç—Ä

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞:
```cpp
#define IMU_FILTER_ALPHA 0.98  // 0.96-0.99
```

## –û—Ç–ª–∞–¥–∫–∞

### Serial Monitor

**Main –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:**
```
[MAIN] PPM: T=50 S=-20 M=128 Sp=200 | Motors: FL=1500 FR=1800 | IMU: R=-2.5 P=1.3
```

**Aux –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:**
```
[AUX] Cmd: T=50 S=-20 M=128 | Motors: BL=1500 BR=1800 | IMU: R=-2.5 P=1.3
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**CAN —Å–≤—è–∑—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä—ã 120–û–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CANH/CANL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –û–±—â–∏–π GND –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω

**PPM –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è:**
- –ü—Ä–∏–µ–º–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ PPM —Ä–µ–∂–∏–º–µ
- GPIO34 —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–Ω–¥ —Å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–æ–º

**–ú–æ—Ç–æ—Ä—ã –Ω–µ –≤—Ä–∞—â–∞—é—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CAN ID –º–æ—Ç–æ—Ä–æ–≤ (0x141-0x144)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ BLDC –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å CAN (1 Mbps)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
firmware/
‚îú‚îÄ‚îÄ main_controller/          # ESP32 Main (–ø–µ—Ä–µ–¥–Ω—è—è —á–∞—Å—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.h         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kinematics.h     # –ö–∏–Ω–µ–º–∞—Ç–∏–∫–∞ –∏ –ø–æ—Ö–æ–¥–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.cpp         # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ platformio.ini
‚îÇ
‚îú‚îÄ‚îÄ aux_controller/           # ESP32 Aux (–∑–∞–¥–Ω—è—è —á–∞—Å—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.h         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.cpp         # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ platformio.ini
‚îÇ
‚îî‚îÄ‚îÄ servo_calibration/        # üÜï –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –æ—Ñ—Å–µ—Ç–æ–≤ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤
    ‚îú‚îÄ‚îÄ include/
    ‚îÇ   ‚îî‚îÄ‚îÄ config.h         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
    ‚îú‚îÄ‚îÄ src/
    ‚îÇ   ‚îî‚îÄ‚îÄ main.cpp         # –ü—Ä–æ—à–∏–≤–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
    ‚îú‚îÄ‚îÄ README.md            # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
    ‚îî‚îÄ‚îÄ platformio.ini

docs/
‚îú‚îÄ‚îÄ QUICKSTART.md            # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ HARDWARE.md              # –°—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

Apache 2.0 - –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ StackForce

## –ê–≤—Ç–æ—Ä—ã

- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã: [StackForce –Ω–∞ Gitee](https://gitee.com/StackForce)
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏: GOODWORKRINKZ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ESP32](https://docs.espressif.com/)
- [PlatformIO](https://docs.platformio.org/)
- [StackForce —Å–∞–π—Ç](https://stackforce.cc/)
- [–í–∏–¥–µ–æ —É—Ä–æ–∫–∏ –Ω–∞ Bilibili](https://www.bilibili.com/)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö ESP32 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤:

1. **–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`main_controller`)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 4 DC –º–æ—Ç–æ—Ä–∞–º–∏ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –∫–∞–∂–¥–æ–µ –∫–æ–ª–µ—Å–æ)
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 8 —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ (–ø–æ 2 –Ω–∞ –∫–∞–∂–¥—É—é –Ω–æ–≥—É)
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–≤–∏–∂–µ–Ω–∏—è –∏ –±–∞–ª–∞–Ω—Å–∞
   - –ü—Ä–∏–µ–º –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ CAN —à–∏–Ω—É
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ —á–µ—Ä–µ–∑ CAN —à–∏–Ω—É

2. **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`aux_controller`)
   - –ü—Ä–∏–µ–º PPM —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç RC –ø—Ä–∏–µ–º–Ω–∏–∫–∞
   - –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ PPM –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–ª–∞–≤–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É —á–µ—Ä–µ–∑ CAN —à–∏–Ω—É
   - –ü—Ä–∏–µ–º —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –æ—Ç –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

### –°–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ **CAN —à–∏–Ω—É** —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 500 –∫–±–∏—Ç/—Å.

#### CAN —Å–æ–æ–±—â–µ–Ω–∏—è:

- **ID 0x100**: –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ—Ç aux ‚Üí main)
  - –ë–∞–π—Ç 0: throttle (-100..100)
  - –ë–∞–π—Ç 1: steering (-100..100)
  - –ë–∞–π—Ç 2: mode (0..255)
  - –ë–∞–π—Ç 3: speed (0..255)

- **ID 0x102**: –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è (–æ—Ç main ‚Üí aux)
  - –ë–∞–π—Ç 0: —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
  - –ë–∞–π—Ç—ã 1-7: –¥–∞–Ω–Ω—ã–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏

## –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (ESP32 #1)

#### –ú–æ—Ç–æ—Ä—ã (PWM + Direction):
```
–ü–µ—Ä–µ–¥–Ω—è—è –ª–µ–≤–∞—è –Ω–æ–≥–∞:
  - PWM: GPIO25
  - DIR1: GPIO26
  - DIR2: GPIO27

–ü–µ—Ä–µ–¥–Ω—è—è –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞:
  - PWM: GPIO32
  - DIR1: GPIO33
  - DIR2: GPIO14

–ó–∞–¥–Ω—è—è –ª–µ–≤–∞—è –Ω–æ–≥–∞:
  - PWM: GPIO12
  - DIR1: GPIO13
  - DIR2: GPIO15

–ó–∞–¥–Ω—è—è –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞:
  - PWM: GPIO2
  - DIR1: GPIO4
  - DIR2: GPIO5
```

#### –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã:
```
–ü–µ—Ä–µ–¥–Ω—è—è –ª–µ–≤–∞—è –Ω–æ–≥–∞:
  - –ü–ª–µ—á–æ: GPIO18
  - –ë–µ–¥—Ä–æ: GPIO19

–ü–µ—Ä–µ–¥–Ω—è—è –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞:
  - –ü–ª–µ—á–æ: GPIO21
  - –ë–µ–¥—Ä–æ: GPIO22

–ó–∞–¥–Ω—è—è –ª–µ–≤–∞—è –Ω–æ–≥–∞:
  - –ü–ª–µ—á–æ: GPIO23
  - –ë–µ–¥—Ä–æ: GPIO16

–ó–∞–¥–Ω—è—è –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞:
  - –ü–ª–µ—á–æ: GPIO17
  - –ë–µ–¥—Ä–æ: GPIO35
```

#### CAN —à–∏–Ω–∞:
```
  - CAN_TX: GPIO5 ‚Üí –∫ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä—É (MCP2551/TJA1050)
  - CAN_RX: GPIO4 ‚Üê –æ—Ç CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (ESP32 #2)

#### PPM –ø—Ä–∏–µ–º–Ω–∏–∫:
```
  - PPM_IN: GPIO34 (–≤—Ö–æ–¥ –æ—Ç RC –ø—Ä–∏–µ–º–Ω–∏–∫–∞)
```

#### CAN —à–∏–Ω–∞:
```
  - CAN_TX: GPIO5 ‚Üí –∫ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä—É
  - CAN_RX: GPIO4 ‚Üê –æ—Ç CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–∞
```

#### –ò–Ω–¥–∏–∫–∞—Ü–∏—è:
```
  - LED —Å—Ç–∞—Ç—É—Å: GPIO2
  - LED —Å–∏–≥–Ω–∞–ª: GPIO15
```

### CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä

–û–±–∞ ESP32 –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ CAN —à–∏–Ω–µ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä—ã (MCP2551 –∏–ª–∏ TJA1050):

```
ESP32_1                 MCP2551                 CAN Bus
GPIO5 (TX) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ TXD
GPIO4 (RX) ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RXD
                        CANH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CANH
                        CANL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CANL

ESP32_2                 MCP2551
GPIO5 (TX) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ TXD
GPIO4 (RX) ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RXD
                        CANH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨
                        CANL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–í–∞–∂–Ω–æ:** 
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã —Ç–µ—Ä–º–∏–Ω–∏—Ä—É—é—â–∏–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã 120 –û–º –Ω–∞ –∫–æ–Ω—Ü–∞—Ö CAN —à–∏–Ω—ã
- –û–±—â–∏–π GND –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ü–∏—Ç–∞–Ω–∏–µ 5V –¥–ª—è CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [PlatformIO](https://platformio.org/) (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VSCode —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PlatformIO)
- USB –∫–∞–±–µ–ª—å –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ ESP32
- CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä—ã (2 —à—Ç): MCP2551 –∏–ª–∏ TJA1050

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PlatformIO

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Visual Studio Code](https://code.visualstudio.com/)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PlatformIO IDE –∏–∑ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ VSCode
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VSCode

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏

#### –î–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:

```bash
cd firmware/main_controller
pio run
```

#### –î–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:

```bash
cd firmware/aux_controller
pio run
```

## –ü—Ä–æ—à–∏–≤–∫–∞ ESP32

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ PlatformIO (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –ü—Ä–æ—à–∏–≤–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ ESP32 #1 –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É —á–µ—Ä–µ–∑ USB
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `firmware/main_controller` –≤ VSCode
3. –í PlatformIO –Ω–∞–∂–º–∏—Ç–µ "Upload" –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   cd firmware/main_controller
   pio run --target upload
   ```
4. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
   ```bash
   pio device monitor
   ```

#### –ü—Ä–æ—à–∏–≤–∫–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:

1. –û—Ç–∫–ª—é—á–∏—Ç–µ ESP32 #1 –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ ESP32 #2
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `firmware/aux_controller` –≤ VSCode
3. –í PlatformIO –Ω–∞–∂–º–∏—Ç–µ "Upload" –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   cd firmware/aux_controller
   pio run --target upload
   ```
4. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
   ```bash
   pio device monitor
   ```

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ esptool (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π)

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —Å–æ–±—Ä–∞–Ω–Ω–∞—è –ø—Ä–æ—à–∏–≤–∫–∞ (.bin —Ñ–∞–π–ª):

```bash
# –î–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
esptool.py --chip esp32 --port /dev/ttyUSB0 write_flash 0x10000 main_controller.bin

# –î–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
esptool.py --chip esp32 --port /dev/ttyUSB0 write_flash 0x10000 aux_controller.bin
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏—Ç–µ `/dev/ttyUSB0` –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π COM-–ø–æ—Ä—Ç –≤–∞—à–µ–≥–æ ESP32.

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ COM-–ø–æ—Ä—Ç–∞

#### Windows:
- –î–∏—Å–ø–µ—Ç—á–µ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤ ‚Üí –ü–æ—Ä—Ç—ã (COM –∏ LPT)
- –û–±—ã—á–Ω–æ: COM3, COM4, –∏ —Ç.–¥.

#### Linux/macOS:
```bash
# –°–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤
ls /dev/tty*

# –û–±—ã—á–Ω–æ: /dev/ttyUSB0 –∏–ª–∏ /dev/ttyACM0 (Linux)
# –û–±—ã—á–Ω–æ: /dev/cu.usbserial-* (macOS)
```

## PPM –∫–∞–Ω–∞–ª—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –º–∞–ø–ø–∏–Ω–≥ PPM –∫–∞–Ω–∞–ª–æ–≤:

| –ö–∞–Ω–∞–ª | –§—É–Ω–∫—Ü–∏—è | –î–∏–∞–ø–∞–∑–æ–Ω |
|-------|---------|----------|
| 0 | –ì–∞–∑ (–≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥) | -100..100 |
| 1 | –†—É–ª–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | -100..100 |
| 2 | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (–≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–π–∫–∏) | 0..255 |
| 3 | –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ | 0..255 |
| 4 | –†–µ–∑–µ—Ä–≤ (AUX1) | - |
| 5 | –†–µ–∑–µ—Ä–≤ (AUX2) | - |

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

#### –î–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:
```bash
cd firmware/main_controller
pio device monitor -b 115200
```

#### –î–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:
```bash
cd firmware/aux_controller
pio device monitor -b 115200
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ CAN —Å–≤—è–∑–∏

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–∞ ESP32 –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ CAN —à–∏–Ω–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Ä–º–∏–Ω–∏—Ä—É—é—â–∏—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ 120 –û–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–≤ (5V)
4. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ/–ø–µ—Ä–µ–¥–∞—á–µ CAN —Ñ—Ä–µ–π–º–æ–≤

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**CAN —Å–≤—è–∑—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CANH –∏ CANL
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ—Ä–º–∏–Ω–∏—Ä—É—é—â–∏—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—â–∏–π GND
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–≤

**PPM —Å–∏–≥–Ω–∞–ª –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PPM –≤—ã—Ö–æ–¥–∞ –ø—Ä–∏–µ–º–Ω–∏–∫–∞ –∫ GPIO34
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–µ–º–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ PPM —Ä–µ–∂–∏–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –ø—Ä–∏–µ–º–Ω–∏–∫–∞

**–ú–æ—Ç–æ—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –º–æ—Ç–æ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PWM –∏ DIR –ø–∏–Ω–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ—Ç–æ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–∞—Ö:
- `firmware/main_controller/include/config.h` - –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
- `firmware/aux_controller/include/config.h` - –¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ PPM —Å–∏–≥–Ω–∞–ª–∞ —Ä–æ–±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –ø–∏—Ç–∞–Ω–∏—è
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –Ω–∏–∑–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤–∞—Ä–∏–π–Ω—ã–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –ø–∏—Ç–∞–Ω–∏—è

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞—Ö StackForce –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π Apache 2.0.

## –ê–≤—Ç–æ—Ä—ã –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞—Ö: 
  - [StackForce Quadrupedal Wheeled Robot](https://gitee.com/StackForce/quadrupedal-wheeled-robot)
  - [StackForce Bipedal Wheeled Robot](https://gitee.com/StackForce/bipedal_wheeled_robot)
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏: GOODWORKRINKZ

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ESP32](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/)
- [PlatformIO –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.platformio.org/)
- [TWAI Driver (CAN –¥–ª—è ESP32-S3)](https://docs.espressif.com/projects/esp-idf/en/latest/esp32s3/api-reference/peripherals/twai.html)

---

## üéì –¢–µ–æ—Ä–∏—è —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

–†–æ–±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∫–∞—Å–∫–∞–¥–Ω—ã–π PID** –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ —Å–ª–æ–∂–Ω–æ–º—É —Ä–µ–ª—å–µ—Ñ—É (–ª–µ—Å—Ç–Ω–∏—Ü—ã, –Ω–µ—Ä–æ–≤–Ω–æ—Å—Ç–∏).

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:

```
1. IMU –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–∞–∫–ª–æ–Ω (pitch/roll)
   ‚Üì
2. PID –≤—ã—á–∏—Å–ª—è–µ—Ç —Ü–µ–ª–µ–≤—É—é —É–≥–ª–æ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
   ‚Üì
3. PID –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã –Ω–æ–≥
   ‚Üì
4. –í—ã—Å–æ—Ç–∞ –Ω–æ–≥ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è (–∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è)
   ‚Üì
5. –†–æ–±–æ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
```

**–ö–ª—é—á–µ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞** (–∏–∑ –≤–∏–¥–µ–æ ÁôªÂì•):

```cpp
// –û—à–∏–±–∫–∞ —É–≥–ª–∞ ‚Üí —Ü–µ–ª–µ–≤–∞—è —É–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
target_velocity = Kp_angle * (0 - current_angle);

// –û—à–∏–±–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ ‚Üí –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã
leg_height_rate = Kp_velocity * (target_velocity - current_angular_velocity);

// –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
leg_height += leg_height_rate * dt;
```

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [docs/STABILIZATION_THEORY.md](docs/STABILIZATION_THEORY.md)

### –ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω—ã–π PID –¥–ª—è pitch (—Å–∫–æ—Ä–æ—Å—Ç—å ‚Üí —É–≥–æ–ª ‚Üí –º–æ–º–µ–Ω—Ç)
- ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –∫—Ä–µ–Ω–∞ `stab_roll`
- ‚úÖ –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç–æ–π L/R –Ω–æ–≥
- ‚úÖ –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 200 Hz
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ pitch –∏ roll –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –û—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π —Å—Ö–µ–º—ã:

**–í–∏–¥–µ–æ (ÁôªÂì•):** –ü—Ä—è–º–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≤—ã—Å–æ—Ç—ã Y —á–µ—Ä–µ–∑ PID  
**–ù–∞—à –∫–æ–¥:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –º–æ–º–µ–Ω—Ç–∞ –º–æ—Ç–æ—Ä–æ–≤ + –∞–¥–∞–ø—Ç–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã –Ω–æ–≥

–≠—Ç–æ –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏!

---

## üö∂ –ü–æ—Ö–æ–¥–∫–∏ (Gaits) - –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ—Ö–æ–¥–∫–∏?

**–ü–æ—Ö–æ–¥–∫–∞** - —ç—Ç–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è 4 –Ω–æ–≥ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –Ω–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è. –ë–µ–∑ –ø–æ—Ö–æ–¥–∫–∏ —Ä–æ–±–æ—Ç —É–ø–∞–¥–µ—Ç –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —à–∞–≥–∞—Ç—å.

### –¢–∏–ø—ã –ø–æ—Ö–æ–¥–æ–∫ –∏–∑ –≤–∏–¥–µ–æ:

| –ü–æ—Ö–æ–¥–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|---------|----------|-----------|
| **Trot** (‰∫§ÂèâÊ≠•ÊÄÅ) | –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä—ã –Ω–æ–≥ | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å + —Å–∫–æ—Ä–æ—Å—Ç—å |
| **Bound** (Ë∑≥Ë∑ÉÊ≠•ÊÄÅ) | –ü–µ—Ä–µ–¥–Ω–∏–µ/–∑–∞–¥–Ω–∏–µ –ø–∞—Ä—ã | –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–≥–∞–ª–æ–ø) |
| **Pace** (Âêå‰æßÊ≠•ÊÄÅ) | –õ–µ–≤–∞—è/–ø—Ä–∞–≤–∞—è –ø–∞—Ä—ã | –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏ |

### –¶–∏–∫–ª–æ–∏–¥–Ω–∞—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è

–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏–∑ —É—Ä–æ–∫–∞ 4 (ÁôªÂì•):

**Swing Phase (–Ω–æ–≥–∞ –≤ –≤–æ–∑–¥—É—Ö–µ):**
```cpp
X_swing = -S/2 + S*œÉ - (S/(2œÄ)) * sin(2œÄ*œÉ)
Y_swing = H_max - H + H * (1 - cos(2œÄ*œÉ))
```

**Stance Phase (–Ω–æ–≥–∞ –Ω–∞ –∑–µ–º–ª–µ):**
```cpp
X_stance = S/2 - S*œÉ
Y_stance = H_max
```

–ì–¥–µ: `œÉ = (t % T_s) / T_s` (—Ñ–∞–∑–∞ 0..1), `S` = –∞–º–ø–ª–∏—Ç—É–¥–∞ —à–∞–≥–∞, `H` = –≤—ã—Å–æ—Ç–∞ –ø–æ–¥—ä–µ–º–∞

### –ù–∞—à —Å—Ç–∞—Ç—É—Å

**‚ùå –£ –Ω–∞—Å –ù–ï–¢ –ø–æ—Ö–æ–¥–æ–∫!**

–ù–∞—à –∫–æ–¥ - **–≥–∏–±—Ä–∏–¥–Ω—ã–π –∫–æ–ª–µ—Å–Ω–æ-–Ω–æ–∂–Ω—ã–π**:
- ‚úÖ –ö–æ–ª–µ—Å–∞ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (–º–æ—Ç–æ—Ä—ã)
- ‚úÖ –ù–æ–≥–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –≤—ã—Å–æ—Ç—ã
- ‚ùå –ù–æ–≥–∏ –ù–ï —á–µ—Ä–µ–¥—É—é—Ç—Å—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏
- ‚ùå –í—Å–µ 4 –Ω–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (–Ω–µ Trot/Bound)

–ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –≥–æ—Ç–æ–≤—ã–µ —Ñ–æ—Ä–º—É–ª—ã: [docs/GAIT_THEORY.md](docs/GAIT_THEORY.md)

**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ö–æ–¥–∫–∏:**
- –î–ª—è —á–∏—Å—Ç–æ–≥–æ –Ω–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –±–µ–∑ –∫–æ–ª–µ—Å
- –î–ª—è –ø–µ—Ä–µ—à–∞–≥–∏–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
- –î–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **[–î–ï–¢–Ø–ú_–û_–†–û–ë–û–¢–ï.md](docs/–î–ï–¢–Ø–ú_–û_–†–û–ë–û–¢–ï.md)** - üéì –ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–ª—è –¥–µ—Ç–µ–π (9+ –ª–µ—Ç): –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–æ–±–æ—Ç, –æ–±—Ä–∞—Ç–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞, —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è, –ø–æ—Ö–æ–¥–∫–∏, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è

### –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã (–ø–µ—Ä–µ–≤–æ–¥—ã –≤–∏–¥–µ–æ ÁôªÂì•)

- **[OVERVIEW.md](docs/OVERVIEW.md)** - –û–±–∑–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ –¥–≤–∏–∂–µ–Ω–∏—è (—É—Ä–æ–∫ 1)
- **[STABILIZATION_THEORY.md](docs/STABILIZATION_THEORY.md)** - –¢–µ–æ—Ä–∏—è —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ (—É—Ä–æ–∫ 5)
- **[GAIT_THEORY.md](docs/GAIT_THEORY.md)** - –¢–µ–æ—Ä–∏—è –ø–æ—Ö–æ–¥–æ–∫ –∏ —Ü–∏–∫–ª–æ–∏–¥–Ω—ã—Ö —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–π (—É—Ä–æ–∫ 4)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

- **[HARDWARE.md](docs/HARDWARE.md)** - –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **[QUICKSTART.md](docs/QUICKSTART.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –ø–µ—Ä–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- **[CALIBRATION_QUICK.md](docs/CALIBRATION_QUICK.md)** - ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤ (5 —à–∞–≥–æ–≤)
- **[CALIBRATION.md](docs/CALIBRATION.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–∞–ª–∏–±—Ä–æ–≤–∫–µ (—Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π)
- **[PID_CONTROLLER.md](docs/PID_CONTROLLER.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PID –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤
- **[LIBRARIES.md](docs/LIBRARIES.md)** - –û–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

### –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –î–≤—É—Ö–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (main + aux)
- CAN/TWAI –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è @ 1Mbps
- –ö–æ–ª–µ—Å–Ω—ã–π —Ä–µ–∂–∏–º (–≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)
- –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è pitch/roll (–∫–∞—Å–∫–∞–¥–Ω—ã–π PID)
- –û–±—Ä–∞—Ç–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞ (5-–∑–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º)
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã –Ω–æ–≥ –ø–æ –∫—Ä–µ–Ω—É
- SBUS RC —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ù–æ–∂–Ω–æ–π —Ä–µ–∂–∏–º (–ø–æ—Ö–æ–¥–∫–∏ Trot/Bound/Pace)
- –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º (–∫–æ–ª–µ—Å–∞ + —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ø–æ—Ö–æ–¥–∫–∏)
- –¶–∏–∫–ª–æ–∏–¥–Ω—ã–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ —Å—Ç–æ–ø
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 4 –Ω–æ–≥–∞–º–∏

**‚ö†Ô∏è –ù–∞—à –ø–æ–¥—Ö–æ–¥:**
–ì–∏–±—Ä–∏–¥–Ω–∞—è –∫–æ–ª–µ—Å–Ω–æ-–Ω–æ–∂–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ –∫–æ–ª–µ—Å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é (–Ω–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é) –∞–¥–∞–ø—Ç–∞—Ü–∏—é –≤—ã—Å–æ—Ç—ã –Ω–æ–≥.

---
