# –ò—Ç–æ–≥–æ–≤–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã IK

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –ù–æ–≤—ã–µ –æ—Ñ—Å–µ—Ç—ã (–æ—Ç–∫–∞–ª–∏–±—Ä–æ–≤–∞–Ω—ã –≤ IK —Ä–µ–∂–∏–º–µ X=0, Y=115)

| –ù–æ–≥–∞ | –°–µ—Ä–≤–æ        | –ö–∞–Ω–∞–ª | –°—Ç–∞—Ä—ã–π –æ—Ñ—Å–µ—Ç | **–ù–æ–≤—ã–π –æ—Ñ—Å–µ—Ç** | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|--------------|-------|--------------|-----------------|-----------|
| FL   | FRONT        | CH2   | 40           | **23**          | -17       |
| FL   | REAR         | CH3   | 27           | **0**           | -27       |
| FR   | FRONT        | CH9   | -45          | **-16**         | +29       |
| FR   | REAR         | CH8   | -16          | **6**           | +22       |
| BL   | FRONT        | CH0   | -22          | **-16**         | +6        |
| BL   | REAR         | CH1   | -13          | **-13**         | 0         |
| BR   | FRONT        | CH11  | 44           | **16**          | -28       |
| BR   | REAR         | CH10  | 5            | **-8**          | -13       |

### –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- **FL_FRONT**: 40 ‚Üí 23 (-17¬∞) - –±–æ–ª—å—à–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è
- **FL_REAR**: 27 ‚Üí 0 (-27¬∞) - —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ!
- **FR_FRONT**: -45 ‚Üí -16 (+29¬∞) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
- **FR_REAR**: -16 ‚Üí 6 (+22¬∞) - –±–æ–ª—å—à–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è
- **BR_FRONT**: 44 ‚Üí 16 (-28¬∞) - —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- **BL_REAR**: -13 ‚Üí -13 (0¬∞) - –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å!
- **BL_FRONT**: -22 ‚Üí -16 (+6¬∞) - –Ω–µ–±–æ–ª—å—à–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è

**–í—ã–≤–æ–¥:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã IK —Å–∏–ª—å–Ω–æ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —É–≥–ª—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∞–≤—É—é –ø–µ—Ä–µ–¥–Ω—é—é –Ω–æ–≥—É (FR) –∏ –ª–µ–≤—É—é –∑–∞–¥–Ω—é—é (FL). –≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –æ—à–∏–±–∫–∞ –≤ —Ñ–æ—Ä–º—É–ª–µ `aRight` ‚Üí `bRight` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—ã–ª–∞ –∫—Ä–∏—Ç–∏—á–Ω–æ–π!

## üìù –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `firmware/main_controller/include/quadrupedal_data.h`
```cpp
// –°–º–µ—â–µ–Ω–∏—è —Å–µ—Ä–≤–æ –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ (–≥—Ä–∞–¥—É—Å—ã)
// –û—Ç–∫–∞–ª–∏–±—Ä–æ–≤–∞–Ω–æ –≤ IK —Ä–µ–∂–∏–º–µ –ø—Ä–∏ X=0, Y=115 (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã IK!)
#define SERVO_FL_FRONT_OFFSET 23   // CH2
#define SERVO_FL_REAR_OFFSET  0    // CH3
#define SERVO_FR_FRONT_OFFSET -16  // CH9
#define SERVO_FR_REAR_OFFSET  6    // CH8
#define SERVO_BL_FRONT_OFFSET -16  // CH0
#define SERVO_BL_REAR_OFFSET  -13  // CH1
#define SERVO_BR_FRONT_OFFSET 16   // CH11
#define SERVO_BR_REAR_OFFSET  -8   // CH10
```

### 2. `firmware/servo_calibration/src/main.cpp`
```cpp
int16_t servoOffsets[16] = {
    -16, -13, 23, 0,    // CH0-3: BL_FRONT, BL_REAR, FL_FRONT, FL_REAR
    0, 0, 0, 0,         // CH4-7: –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
    6, -16, -8, 16,     // CH8-11: FR_REAR, FR_FRONT, BR_REAR, BR_FRONT
    0, 0, 0, 0          // CH12-15: –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
};
```

### 3. `calibration_gui.py`
```python
self.offsets = [23, 0, -16, 6, -16, -13, 16, -8]  # –û—Ç–∫–∞–ª–∏–±—Ä–æ–≤–∞–Ω—ã –≤ IK —Ä–µ–∂–∏–º–µ
```

## ‚úÖ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é –ø—Ä–æ—à–∏–≤–∫—É `main_controller`**
   ```bash
   cd firmware/main_controller
   pio run --target upload
   pio device monitor -b 921600
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**
   - –ù–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏
   - –ù–∏–∫–∞–∫–æ–≥–æ "—Ä–∞—Å–ø–∏–¥–æ—Ä–∞—à–∏–≤–∞–Ω–∏—è"!
   - IK –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã**
   - `ik off` - –Ω–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ –º–µ—Å—Ç–µ
   - `ik on` - –Ω–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ IK –ø–æ–∑–∏—Ü–∏—é –±–µ–∑ —Ä—ã–≤–∫–æ–≤
   - `stab off` / `stab on` - —Ç–µ—Å—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

4. **–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ—Ç–æ—Ä—ã:
   - `motors on` - –≤–∫–ª—é—á–∏—Ç—å BLDC –º–æ—Ç–æ—Ä—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ SBUS

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ IK (main_controller/src/main.cpp, —Å—Ç—Ä–æ–∫–∞ 160)
```cpp
// –ë–´–õ–û (–û–®–ò–ë–ö–ê):
alpha1 = 2 * atan((aRight + sqrt(...)) / (aRight + cRight));

// –°–¢–ê–õ–û (–ü–†–ê–í–ò–õ–¨–ù–û):
alpha1 = 2 * atan((bRight + sqrt(...)) / (aRight + cRight));
```

### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã IK
- **X = 0** (–Ω–æ–≥–∏ —Å—Ç—Ä–æ–≥–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ, –±–µ–∑ –Ω–∞–∫–ª–æ–Ω–∞ –≤–ø–µ—Ä—ë–¥/–Ω–∞–∑–∞–¥)
- **Y = 115** (–≤—ã—Å–æ—Ç–∞ –æ—Ç –æ—Å–∏ –∫–æ–ª–µ—Å–∞ –¥–æ –≤–µ—Ä—Ö–Ω–µ–≥–æ —Å–µ—Ä–≤–æ)

### –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
- **IK**: –í–ö–õ–Æ–ß–ï–ù–ê (`ik_enabled = true`)
- **Stabilization**: –í–ö–õ–Æ–ß–ï–ù–ê (`stabilization_enabled = true`)
- **Motors**: –í–´–ö–õ–Æ–ß–ï–ù–´ (`motors_enabled = false`)

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–º–µ—Ç—Ä–∏–∏

### –ü–µ—Ä–µ–¥–Ω–∏–µ –Ω–æ–≥–∏ (Front):
- FL_FRONT: 23, FR_FRONT: -16 ‚Üí —Ä–∞–∑–Ω–∏—Ü–∞ ~39¬∞ (–∞—Å–∏–º–º–µ—Ç—Ä–∏—è)
- FL_REAR: 0, FR_REAR: 6 ‚Üí —Ä–∞–∑–Ω–∏—Ü–∞ ~6¬∞ (–ø–æ—á—Ç–∏ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ)

### –ó–∞–¥–Ω–∏–µ –Ω–æ–≥–∏ (Back):
- BL_FRONT: -16, BR_FRONT: 16 ‚Üí —Ä–∞–∑–Ω–∏—Ü–∞ 32¬∞ (–∞—Å–∏–º–º–µ—Ç—Ä–∏—è)
- BL_REAR: -13, BR_REAR: -8 ‚Üí —Ä–∞–∑–Ω–∏—Ü–∞ 5¬∞ (–ø–æ—á—Ç–∏ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ)

**–ù–∞–±–ª—é–¥–µ–Ω–∏–µ:** REAR —Å–µ—Ä–≤–æ –∏–º–µ—é—Ç –±–ª–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ—á—Ç–∏ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã), –∞ FRONT —Å–µ—Ä–≤–æ —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è. –≠—Ç–æ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞:
1. –ù–µ–±–æ–ª—å—à—É—é –∞—Å–∏–º–º–µ—Ç—Ä–∏—é –≤ –º–µ—Ö–∞–Ω–∏–∫–µ (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ä—É—á–Ω–æ–π —Å–±–æ—Ä–∫–∏)
2. –ò–ª–∏ –Ω–µ–±–æ–ª—å—à—É—é –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –≤ –∫–∞–ª–∏–±—Ä–æ–≤–∫–µ –≤—ã—Å–æ—Ç—ã 115–º–º

–ï—Å–ª–∏ —Ä–æ–±–æ—Ç —Å—Ç–æ–∏—Ç —Ä–æ–≤–Ω–æ –∏ –Ω–µ –∫–∞—á–∞–µ—Ç—Å—è - –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ! üëç

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏:
- ‚úÖ –ù–æ–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏
- ‚úÖ –ù–µ—Ç "—Ä–∞—Å–ø–∏–¥–æ—Ä–∞—à–∏–≤–∞–Ω–∏—è" –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ IK
- ‚úÖ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ –±–µ–∑ —Ä—ã–≤–∫–æ–≤
- ‚úÖ –†–æ–±–æ—Ç –≥–æ—Ç–æ–≤ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –º–æ—Ç–æ—Ä–∞–º–∏

–£—Å–ø–µ—Ö–æ–≤ –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏! üéâ
