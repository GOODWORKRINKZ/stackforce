# –ú–∞–ø–ø–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤ SBUS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–±–æ—Ç–æ–º

## üì° –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤

| –ö–∞–Ω–∞–ª | –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|--------|------------|------|----------|
| **CH2** | 1 | `RC_CH_FORWARD` | –°—Ç–∏–∫ | –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥ |
| **CH4** | 3 | `RC_CH_TURN` | –°—Ç–∏–∫ | –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ |
| **CH5** | 4 | `RC_CH_ARM` | 2-–ø–æ–∑ | ARM –º–æ—Ç–æ—Ä–æ–≤ (–≤–∫–ª/–≤—ã–∫–ª) |
| **CH6** | 5 | `RC_CH_MODE1` | 3-–ø–æ–∑ | –†–µ–∂–∏–º 1 (–≤—ã—Å–æ—Ç–∞/–ø–æ—Ö–æ–¥–∫–∞) |
| **CH7** | 6 | `RC_CH_MODE2` | 3-–ø–æ–∑ | –†–µ–∂–∏–º 2 (—Å–∫–æ—Ä–æ—Å—Ç—å/—Ä–µ–∂–∏–º) |
| **CH8** | 7 | `RC_CH_STAB` | 2-–ø–æ–∑ | –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (–≤–∫–ª/–≤—ã–∫–ª) |

## üéÆ –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### CH2 - –î–≤–∏–∂–µ–Ω–∏–µ –≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥ (RC_CH_FORWARD)
- **–¢–∏–ø:** –ê–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å—Ç–∏–∫
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 200-1800
- **–¶–µ–Ω—Ç—Ä:** ~1000
- **–§—É–Ω–∫—Ü–∏—è:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç—å—é –¥–≤–∏–∂–µ–Ω–∏—è
  - < 1000: –ù–∞–∑–∞–¥
  - = 1000: –°—Ç–æ–ø
  - \> 1000: –í–ø–µ—Ä–µ–¥

### CH4 - –ü–æ–≤–æ—Ä–æ—Ç –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ (RC_CH_TURN)
- **–¢–∏–ø:** –ê–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å—Ç–∏–∫
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 200-1800
- **–¶–µ–Ω—Ç—Ä:** ~1000
- **–§—É–Ω–∫—Ü–∏—è:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–æ–º
  - < 1000: –í–ª–µ–≤–æ
  - = 1000: –ü—Ä—è–º–æ
  - \> 1000: –í–ø—Ä–∞–≤–æ

### CH5 - ARM –º–æ—Ç–æ—Ä–æ–≤ (RC_CH_ARM)
- **–¢–∏–ø:** 2-–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 200 (OFF) / 1800 (ON)
- **–§—É–Ω–∫—Ü–∏—è:** –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º–æ—Ç–æ—Ä–æ–≤
  - < 1000: **DISARM** (–º–æ—Ç–æ—Ä—ã –≤—ã–∫–ª—é—á–µ–Ω—ã, –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º)
  - \> 1000: **ARM** (–º–æ—Ç–æ—Ä—ã –≤–∫–ª—é—á–µ–Ω—ã, –º–æ–∂–Ω–æ –µ—Ö–∞—Ç—å)

### CH6 - –†–µ–∂–∏–º 1 (RC_CH_MODE1)
- **–¢–∏–ø:** 3-–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- **–ü–æ–∑–∏—Ü–∏–∏:**
  - **0** (< 600): –ù–∏–∑–∫–∞—è –≤—ã—Å–æ—Ç–∞ / –ü–æ–ª–∑–∞–Ω–∏–µ (Crawl)
  - **1** (600-1400): –°—Ä–µ–¥–Ω—è—è –≤—ã—Å–æ—Ç–∞ / –†—ã—Å—å (Trot)
  - **2** (\> 1400): –í—ã—Å–æ–∫–∞—è –≤—ã—Å–æ—Ç–∞ / –ì–∞–ª–æ–ø (Bound)

### CH7 - –†–µ–∂–∏–º 2 (RC_CH_MODE2)
- **–¢–∏–ø:** 3-–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- **–ü–æ–∑–∏—Ü–∏–∏:**
  - **0** (< 600): –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (30%)
  - **1** (600-1400): –°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å (60%)
  - **2** (\> 1400): –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (100%)

### CH8 - –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (RC_CH_STAB)
- **–¢–∏–ø:** 2-–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 200 (OFF) / 1800 (ON)
- **–§—É–Ω–∫—Ü–∏—è:** –ê–∫—Ç–∏–≤–∞—Ü–∏—è IMU —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏
  - < 1000: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è **–í–´–ö–õ** (—Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
  - \> 1000: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è **–í–ö–õ** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –Ω–∞–∫–ª–æ–Ω–∞)

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ß—Ç–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤
```cpp
// –ü–æ–ª—É—á–∏—Ç—å –º–∞—Å—Å–∏–≤ –∫–∞–Ω–∞–ª–æ–≤ –æ—Ç SBUS
auto channels = sbus.ch();

// –ß—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
int16_t forward = channels[RC_CH_FORWARD];  // CH2
int16_t turn = channels[RC_CH_TURN];        // CH4
int16_t arm = channels[RC_CH_ARM];          // CH5
int16_t mode1 = channels[RC_CH_MODE1];      // CH6
int16_t mode2 = channels[RC_CH_MODE2];      // CH7
int16_t stab = channels[RC_CH_STAB];        // CH8
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
```cpp
// –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é 3-–ø–æ–∑ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
int heightMode = get3PosSwitchPosition(channels[RC_CH_MODE1]);
// heightMode: 0 = –Ω–∏–∑, 1 = —Ü–µ–Ω—Ç—Ä, 2 = –≤–µ—Ä—Ö

int speedMode = get3PosSwitchPosition(channels[RC_CH_MODE2]);

// –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ 2-–ø–æ–∑ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
bool motorsArmed = get2PosSwitchState(channels[RC_CH_ARM]);
bool stabEnabled = get2PosSwitchState(channels[RC_CH_STAB]);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ ARM –ø–µ—Ä–µ–¥ –¥–≤–∏–∂–µ–Ω–∏–µ–º
if (motorsArmed) {
    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–æ—Ç–æ—Ä–∞–º–∏
    float throttle = map(forward, 200, 1800, -100, 100);
    float steering = map(turn, 200, 1800, -100, 100);
} else {
    // –ú–æ—Ç–æ—Ä—ã –≤—ã–∫–ª—é—á–µ–Ω—ã - —Å—Ç–æ–ø
    stopAllMotors();
}
```

### –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ —Ä–µ–∂–∏–º–æ–≤
```cpp
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Ö–æ–¥–∫–∏ –ø–æ CH6
switch(get3PosSwitchPosition(channels[RC_CH_MODE1])) {
    case 0: robot.setGait("crawl"); break;   // –ü–æ–ª–∑–∞–Ω–∏–µ
    case 1: robot.setGait("trot"); break;    // –†—ã—Å—å
    case 2: robot.setGait("bound"); break;   // –ì–∞–ª–æ–ø
}

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ CH7
int speedLevel = get3PosSwitchPosition(channels[RC_CH_MODE2]);
float speedMultiplier = (speedLevel == 0) ? 0.3f : 
                       (speedLevel == 1) ? 0.6f : 1.0f;

// –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ CH8
robot.setStabilization(get2PosSwitchState(channels[RC_CH_STAB]));
```

## üîß –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞

–ï—Å–ª–∏ –∫–∞–Ω–∞–ª—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –æ—Ç–∫—Ä–æ–π—Ç–µ `receiver_test` –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–î–∏–∞–ø–∞–∑–æ–Ω –∫–∞–Ω–∞–ª–æ–≤** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ~200-1800)
2. **–¶–µ–Ω—Ç—Ä —Å—Ç–∏–∫–æ–≤** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ~1000)
3. **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏**:
   - 2-–ø–æ–∑: ~200 –∏ ~1800
   - 3-–ø–æ–∑: ~200, ~1000, ~1800

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–í–ê–ñ–ù–û:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `RC_CH_ARM` –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º –º–æ—Ç–æ—Ä–æ–≤!
- –ò–Ω–¥–µ–∫—Å—ã –º–∞—Å—Å–∏–≤–∞ –Ω–∞ **1 –º–µ–Ω—å—à–µ** –Ω–æ–º–µ—Ä–∞ –∫–∞–Ω–∞–ª–∞ (CH1 = –∏–Ω–¥–µ–∫—Å 0)
- –î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π SBUS: 172-1811 (–∏—Å–ø–æ–ª—å–∑—É–µ–º 200-1800 —Å –∑–∞–ø–∞—Å–æ–º)
- –ú—ë—Ä—Ç–≤–∞—è –∑–æ–Ω–∞ —Å—Ç–∏–∫–æ–≤: ¬±30 –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ (~1.5%)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫
2. CH5 –≤ **–Ω–∏–∂–Ω–µ–µ** –ø–æ–ª–æ–∂–µ–Ω–∏–µ (DISARM)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–æ–±–æ—Ç–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ `receiver_test`
5. CH5 –≤ **–≤–µ—Ä—Ö–Ω–µ–µ** –ø–æ–ª–æ–∂–µ–Ω–∏–µ (ARM)
6. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ CH2 (–≤–ø–µ—Ä–µ–¥/–Ω–∞–∑–∞–¥) –∏ CH4 (–ø–æ–≤–æ—Ä–æ—Ç—ã)
