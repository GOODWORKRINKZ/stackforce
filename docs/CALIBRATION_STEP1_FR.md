# üîß –ü–æ—à–∞–≥–æ–≤–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ - –ü–µ—Ä–µ–¥–Ω—è—è –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞ (FR)

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–ö–æ–¥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É —Ç–æ–ª—å–∫–æ FR –Ω–æ–≥–∏**
- –ê–∫—Ç–∏–≤–Ω—ã –∫–∞–Ω–∞–ª—ã: 2 (SERVO_FR_FRONT), 1 (SERVO_FR_REAR)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ 6 —Å–µ—Ä–≤–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∞: Y=70mm, X=0mm
- –í—Å–µ –æ—Ñ—Ñ—Å–µ—Ç—ã = 0

## –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

### –§–∏–∑–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ FR (–ø–µ—Ä–µ–¥–Ω—è—è –ø—Ä–∞–≤–∞—è):
```
PCA9685:
- –ö–∞–Ω–∞–ª 2 ‚Üí SERVO_FR_FRONT (–ø–µ—Ä–µ–¥–Ω–∏–π —Å–µ—Ä–≤–æ)
- –ö–∞–Ω–∞–ª 1 ‚Üí SERVO_FR_REAR (–∑–∞–¥–Ω–∏–π —Å–µ—Ä–≤–æ)
```

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ–∑–∞ –ø—Ä–∏ Y=70, X=0:

```
    –ö–æ—Ä–ø—É—Å
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       ‚îÇ
       ‚óè  ‚Üê –ü–ª–µ—á–æ (—Ç–æ—á–∫–∞ –∫—Ä–µ–ø–ª–µ–Ω–∏—è)
      ‚ï±‚îÇ
     ‚óè ‚îÇ  ‚Üê FRONT —Å–µ—Ä–≤–æ (–∫–∞–Ω–∞–ª 2)
     ‚îÇ ‚îÇ
     ‚îÇ ‚îÇ
     ‚óè ‚îÇ  ‚Üê REAR —Å–µ—Ä–≤–æ (–∫–∞–Ω–∞–ª 1)
     ‚îÇ ‚îÇ
     ‚îÇ ‚îÇ  70mm –æ—Ç –ø–ª–µ—á–∞
     ‚îÇ ‚îÇ
     ‚óã    ‚Üê –ö–æ–ª–µ—Å–æ –Ω–∞ –∑–µ–º–ª–µ
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- –ù–æ–≥–∞ –ø–æ—á—Ç–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è
- –ù–µ–±–æ–ª—å—à–æ–π –∏–∑–≥–∏–± –≤ —Å—É—Å—Ç–∞–≤–∞—Ö
- –ö–æ–ª–µ—Å–æ –∫–∞—Å–∞–µ—Ç—Å—è –∑–µ–º–ª–∏
- –í—ã—Å–æ—Ç–∞ ~70mm –æ—Ç —Ç–æ—á–∫–∏ –∫—Ä–µ–ø–ª–µ–Ω–∏—è –¥–æ –∫–æ–ª–µ—Å–∞

## –ß—Ç–æ –±—É–¥–µ—Ç –≤ Serial Monitor

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏:
```
========================================
  –ö–ê–õ–ò–ë–†–û–í–û–ß–ù–´–ô –†–ï–ñ–ò–ú
  –ê–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–Ω—è—è –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞ (FR)
  –ö–∞–Ω–∞–ª—ã PCA9685: 2 (FRONT), 1 (REAR)
========================================

[IK] FR: FRONT=270 REAR=270 (X=0.0 Y=70.0)
```

–ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É:
```
[–ö–ê–õ–ò–ë–†–û–í–ö–ê FR] Y=70.0 X=0.0 | FRONT=270 REAR=270 | Pitch=0.0 Roll=0.0
```

## –†–∞—Å—á—ë—Ç–Ω—ã–µ —É–≥–ª—ã (–ø—Ä–∏ Y=70, X=0)

–ò–∑ –æ–±—Ä–∞—Ç–Ω–æ–π –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∏ (—Ñ–æ—Ä–º—É–ª—ã –≤ main.cpp):

```cpp
// –î–ª—è FR (–ø—Ä–∞–≤–∞—è):
servoFrontRightFront = 270 - betaRightToAngle
servoFrontRightRear  = 270 - alphaRightToAngle

// –ü—Ä–∏ Y=70, X=0 –ø—Ä–∏–º–µ—Ä–Ω–æ:
// alphaRight ‚âà 1.0 —Ä–∞–¥–∏–∞–Ω ‚âà 57¬∞
// betaRight  ‚âà 0.2 —Ä–∞–¥–∏–∞–Ω ‚âà 11¬∞

// –ò—Ç–æ–≥–æ:
// FRONT ‚âà 270 - 11 = 259¬∞
// REAR  ‚âà 270 - 57 = 213¬∞
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —É–≥–ª—ã: FRONT ‚âà 259¬∞, REAR ‚âà 213¬∞**

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É
```powershell
cd firmware\main_controller
platformio run --target upload
platformio device monitor -b 921600
```

### 2. –°–º–æ—Ç—Ä–∏—Ç–µ –≤ Serial Monitor
```
[IK] FR: FRONT=259 REAR=213 (X=0.0 Y=70.0)
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –ø–æ–∑—É FR –Ω–æ–≥–∏

**–ï—Å–ª–∏ –Ω–æ–≥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è, –∫–æ–ª–µ—Å–æ –Ω–∞ –∑–µ–º–ª–µ):**
‚úÖ –û—Ñ—Ñ—Å–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è 0, –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ!

**–ï—Å–ª–∏ –Ω–æ–≥–∞ –∫—Ä–∏–≤–∞—è:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ù–µ–±–æ–ª—å—à–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (< 30¬∞)
–ò–∑–º–µ—Ä—å—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–∫–æ–ª—å–∫–æ –≥—Ä–∞–¥—É—Å–æ–≤ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å/—É–±–∞–≤–∏—Ç—å:
```cpp
// –í quadrupedal_data.h:
#define SERVO_FR_FRONT_OFFSET +15  // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ +15¬∞
#define SERVO_FR_REAR_OFFSET  -10  // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ -10¬∞
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ë–æ–ª—å—à–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (> 30¬∞)
1. –í—ã–∫–ª—é—á–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ
2. –û—Ç–∫—Ä—É—Ç–∏—Ç–µ —Å–µ—Ä–≤–æ—Ä—ã—á–∞–≥
3. –ü–æ–≤–µ—Ä–Ω–∏—Ç–µ –Ω–∞ 1-2 –∑—É–±–∞ –≤ –Ω—É–∂–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É
4. –ó–∞–∫—Ä—É—Ç–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ
5. –í–∫–ª—é—á–∏—Ç–µ, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
6. –¢–µ–ø–µ—Ä—å –æ—Ñ—Ñ—Å–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω—å—à–µ

### 4. –ò—Ç–µ—Ä–∞—Ü–∏—è
- –ò–∑–º–µ–Ω–∏—Ç–µ –æ—Ñ—Ñ—Å–µ—Ç—ã –≤ `quadrupedal_data.h`
- –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ: `platformio run --target upload`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–∑—É
- –ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ

## –¶–µ–ª–µ–≤–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ FR –Ω–æ–≥–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ø—Ä–∏ Y=70, X=0
‚úÖ –ö–æ–ª–µ—Å–æ –∫–∞—Å–∞–µ—Ç—Å—è –∑–µ–º–ª–∏
‚úÖ –û—Ñ—Ñ—Å–µ—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö ¬±30¬∞
‚úÖ Serial –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —É–≥–ª—ã

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –Ω–æ–≥–µ!**

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ FR:
1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å FL (–ø–µ—Ä–µ–¥–Ω—é—é –ª–µ–≤—É—é)
2. –ö–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å FL
3. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å BL (–∑–∞–¥–Ω—é—é –ª–µ–≤—É—é)
4. –ö–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å BL
5. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å BR (–∑–∞–¥–Ω—é—é –ø—Ä–∞–≤—É—é)
6. –ö–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å BR
7. –í–∫–ª—é—á–∏—Ç—å –≤—Å–µ 8 —Å–µ—Ä–≤–æ
8. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –≤—Å–µ –Ω–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º–∏!

## –û—Ç–ª–∞–¥–∫–∞

### Serial –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç NaN –∏–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ —É–≥–ª—ã:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Y=70 (–Ω–µ 0, –Ω–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º—É–ª—ã IK - –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è L1=60, L2=100, L3=100, L4=60

### –°–µ—Ä–≤–æ –¥—Ä–æ–∂–∏—Ç:
- –£–≥–æ–ª –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ 0-300¬∞
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ (6V BEC)
- –ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–µ–¥–∞–Ω–∏–µ

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª PCA9685:
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥:
```cpp
#define SERVO_FR_FRONT 2  // –ö–∞–Ω–∞–ª 2
#define SERVO_FR_REAR  1  // –ö–∞–Ω–∞–ª 1
```

–§–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–æ –∫—Ä–æ–º–µ –æ–¥–Ω–æ–≥–æ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∫–∞–Ω–∞–ª–µ!
