# Переназначение ног после поворота на 180°

## Проблема
Робот физически повернут на 180° относительно гироскопа (IMU). 
Гироскоп установлен так, что его "перед" смотрит назад робота.

## Решение
Вместо переустановки гироскопа или перекалибровки всех сервоприводов, 
просто переназначаем каналы в коде.

## Маппинг до и после

| Логическая нога | Физический канал | Офсеты | Комментарий |
|----------------|------------------|--------|-------------|
| **FL** (Front Left) | **CH2, CH3** | **40, 27** | Физически был BR |
| **FR** (Front Right) | **CH9, CH8** | **-45, -16** | Физически был BL |
| **BL** (Back Left) | **CH0, CH1** | **-22, -13** | Физически был FR |
| **BR** (Back Right) | **CH11, CH10** | **44, 5** | Физически был FL |

### Старый маппинг (до поворота):
```
FL: CH11,10 (офсеты 44,5)
FR: CH0,1   (офсеты -22,-13)
BL: CH9,8   (офсеты -45,-16)
BR: CH2,3   (офсеты 40,27)
```

### Новый маппинг (после поворота на 180°):
```
FL: CH2,3   (офсеты 40,27)   ← был BR
FR: CH9,8   (офсеты -45,-16) ← был BL
BL: CH0,1   (офсеты -22,-13) ← был FR
BR: CH11,10 (офсеты 44,5)    ← был FL
```

## Схема поворота

```
        ДО ПОВОРОТА                      ПОСЛЕ ПОВОРОТА (180°)
        
        FL -------- FR                   BL -------- BR
         |          |                     |          |
         |   ВПЕРЕД |                     |   ВПЕРЕД |
         |    ↑     |         →           |    ↑     |
         |    IMU   |                     |          |
         |          |                     |    IMU   |
        BL -------- BR                   FL -------- FR
                                            (физически)
```

## Обновленные файлы

1. **`firmware/main_controller/include/quadrupedal_data.h`**
   - Переназначены каналы сервоприводов
   - Переназначены офсеты

2. **`firmware/servo_calibration/src/main.cpp`**
   - Переназначены каналы
   - Переназначены офсеты в массиве `servoOffsets[16]`
   - Обновлены имена для отладки `SERVO_NAMES[]`

3. **`calibration_gui.py`**
   - Обновлены `servo_names`
   - Обновлены `servo_channels`

## Проверка

После загрузки обновленной прошивки:

1. **Калибровочная прошивка:** Загрузите `servo_calibration` - робот должен встать вертикально
2. **Основная прошивка:** Загрузите `main_controller` - робот должен встать вертикально
3. **Движение вперёд:** При команде "вперёд" робот должен ехать в сторону гироскопа
4. **Стабилизация:** При наклоне вперёд передние ноги (FL, FR) должны подниматься

## Преимущества

✅ Не нужно перекалибровать сервоприводы
✅ Не нужно переустанавливать гироскоп
✅ Все офсеты остаются прежними (просто переназначены)
✅ Гироскоп теперь правильно ориентирован относительно робота
