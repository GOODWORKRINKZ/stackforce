# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - StackForce Firmware v2.0

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**Main Controller (–ì–æ–ª–æ–≤–∞):**
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –í–°–ï–ú–ò 8 —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ (4 –Ω–æ–≥–∏)
- –ß–∏—Ç–∞–µ—Ç SBUS –ø—É–ª—å—Ç + MPU6050 IMU
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–¥–Ω–∏–º–∏ –º–æ—Ç–æ—Ä–∞–º–∏ M0, M1
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ CAN

**Aux Controller (–•–≤–æ—Å—Ç):**
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –¢–û–õ–¨–ö–û –∑–∞–¥–Ω–∏–º–∏ –º–æ—Ç–æ—Ä–∞–º–∏ M2, M3
- –ß–∏—Ç–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ CAN –æ—Ç main
- –ù–ï —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏

## Mapping —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤

–í—Å–µ 8 —Å–µ—Ä–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ PCA9685 –Ω–∞ main –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ:

```
–ü–µ—Ä–µ–¥–Ω–∏–µ –Ω–æ–≥–∏:
  Front Left:  SERVO_FL_FRONT = 3, SERVO_FL_REAR = 4
  Front Right: SERVO_FR_FRONT = 2, SERVO_FR_REAR = 1

–ó–∞–¥–Ω–∏–µ –Ω–æ–≥–∏:
  Back Left:   SERVO_BL_FRONT = 7, SERVO_BL_REAR = 8
  Back Right:  SERVO_BR_FRONT = 6, SERVO_BR_REAR = 5
```

## –ù–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

### –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞
- 2x ESP32 Dev Board (30 pin)
- 2x CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä MCP2551 –∏–ª–∏ TJA1050
- 1x PCA9685 (16-–∫–∞–Ω–∞–ª—å–Ω—ã–π PWM –¥—Ä–∞–π–≤–µ—Ä)
- 1x MPU6050 (IMU –º–æ–¥—É–ª—å)
- 4x BLDC –º–æ—Ç–æ—Ä —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ CAN)
- 8x –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ (MG996R –∏–ª–∏ –∞–Ω–∞–ª–æ–≥)
- 1x PPM RC –ø—Ä–∏–µ–º–Ω–∏–∫ (FlySky, FrSky –∏ —Ç.–¥.)
- –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è (Li-Po 3S, 11.1V)
- –ü—Ä–æ–≤–æ–¥–∞, –º–∞–∫–µ—Ç–Ω–∞—è –ø–ª–∞—Ç–∞

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- USB –∫–∞–±–µ–ª—å –¥–ª—è ESP32
- –ö–æ–º–ø—å—é—Ç–µ—Ä (Windows/Mac/Linux)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: PlatformIO + VS Code (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ VS Code
1. –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Visual Studio Code](https://code.visualstudio.com/)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ VS Code

#### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PlatformIO
1. –û—Ç–∫—Ä–æ–π—Ç–µ Extensions (Ctrl+Shift+X)
2. –ù–∞–π–¥–∏—Ç–µ "PlatformIO IDE"
3. –ù–∞–∂–º–∏—Ç–µ Install
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-3 –º–∏–Ω—É—Ç—ã)
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ VS Code

#### –®–∞–≥ 3: –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
1. File ‚Üí Open Folder
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `firmware/esp32_main_controller` –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
3. –ò–ª–∏ `firmware/esp32_ppm_controller` –¥–ª—è PPM –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
4. PlatformIO –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç 2: Arduino IDE

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Arduino IDE
1. –°–∫–∞—á–∞–π—Ç–µ [Arduino IDE 2.x](https://www.arduino.cc/en/software)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É

#### –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ESP32
1. File ‚Üí Preferences
2. –í –ø–æ–ª–µ "Additional Board Manager URLs" –¥–æ–±–∞–≤—å—Ç–µ:
   ```
   https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
   ```
3. Tools ‚Üí Board ‚Üí Boards Manager
4. –ù–∞–π–¥–∏—Ç–µ "ESP32" –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ "ESP32 by Espressif Systems"

#### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫
–í Arduino IDE: Tools ‚Üí Manage Libraries, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
- ESP32-Arduino-CAN (miwagner)
- Adafruit PWM Servo Driver Library
- Adafruit MPU6050
- Adafruit Unified Sensor

## –ü—Ä–æ—à–∏–≤–∫–∞ ESP32

### –ß–µ—Ä–µ–∑ PlatformIO (VS Code)

#### –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (ESP32 #1):
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ ESP32 #1 –∫ USB
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `firmware/esp32_main_controller` –≤ VS Code
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚Üí" (Upload) –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞
4. –ò–ª–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: `pio run --target upload`

#### PPM –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (ESP32 #2):
1. –û—Ç–∫–ª—é—á–∏—Ç–µ ESP32 #1, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ ESP32 #2
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É `firmware/esp32_ppm_controller`
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚Üí" (Upload)

### –ß–µ—Ä–µ–∑ Arduino IDE

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `src/main.cpp` –≤ Arduino IDE
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `include/config.h` –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–∫–ª–∞–¥–∫—É
3. Tools ‚Üí Board ‚Üí ESP32 Arduino ‚Üí ESP32 Dev Module
4. Tools ‚Üí Port ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à COM –ø–æ—Ä—Ç
5. –ù–∞–∂–º–∏—Ç–µ Upload (‚Üí)

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### ESP32 #1 - –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ESP32 #1  ‚îÇ
‚îÇ  (–ì–õ–ê–í–ù–´–ô)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ GPIO 4  ‚îÄ‚îÄ‚îÄ‚ñ∫ CAN_RX (–∫ MCP2551)
       ‚îú‚îÄ‚îÄ GPIO 5  ‚îÄ‚îÄ‚îÄ‚ñ∫ CAN_TX (–∫ MCP2551)
       ‚îú‚îÄ‚îÄ GPIO 21 ‚îÄ‚îÄ‚îÄ‚ñ∫ SDA (–∫ PCA9685)
       ‚îú‚îÄ‚îÄ GPIO 22 ‚îÄ‚îÄ‚îÄ‚ñ∫ SCL (–∫ PCA9685)
       ‚îú‚îÄ‚îÄ GPIO 2  ‚îÄ‚îÄ‚îÄ‚ñ∫ LED —Å—Ç–∞—Ç—É—Å
       ‚îî‚îÄ‚îÄ GPIO 15 ‚îÄ‚îÄ‚îÄ‚ñ∫ LED CAN
```

### ESP32 #2 - PPM –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ESP32 #2  ‚îÇ
‚îÇ   (PPM+IMU) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ GPIO 4  ‚îÄ‚îÄ‚îÄ‚ñ∫ CAN_RX (–∫ MCP2551)
       ‚îú‚îÄ‚îÄ GPIO 5  ‚îÄ‚îÄ‚îÄ‚ñ∫ CAN_TX (–∫ MCP2551)
       ‚îú‚îÄ‚îÄ GPIO 21 ‚îÄ‚îÄ‚îÄ‚ñ∫ SDA (–∫ MPU6050)
       ‚îú‚îÄ‚îÄ GPIO 22 ‚îÄ‚îÄ‚îÄ‚ñ∫ SCL (–∫ MPU6050)
       ‚îú‚îÄ‚îÄ GPIO 34 ‚îÄ‚îÄ‚îÄ‚ñ∫ PPM –≤—Ö–æ–¥ (–æ—Ç RC –ø—Ä–∏–µ–º–Ω–∏–∫–∞)
       ‚îú‚îÄ‚îÄ GPIO 2  ‚îÄ‚îÄ‚îÄ‚ñ∫ LED —Å—Ç–∞—Ç—É—Å
       ‚îú‚îÄ‚îÄ GPIO 15 ‚îÄ‚îÄ‚îÄ‚ñ∫ LED CAN
       ‚îú‚îÄ‚îÄ GPIO 16 ‚îÄ‚îÄ‚îÄ‚ñ∫ LED PPM
       ‚îî‚îÄ‚îÄ GPIO 17 ‚îÄ‚îÄ‚îÄ‚ñ∫ LED IMU
```

### CAN —à–∏–Ω–∞

```
ESP32 #1        MCP2551         CAN BUS         MCP2551        ESP32 #2
  TX ‚îÄ‚îÄ‚ñ∫ TXD                                        TXD ‚óÑ‚îÄ‚îÄ  TX
  RX ‚óÑ‚îÄ‚îÄ RXD                                        RXD ‚îÄ‚îÄ‚ñ∫  RX
         CANH ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ[120Œ©]‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ[120Œ©]‚îÄ‚îÄ‚î¨‚îÄ‚îÄ CANH
         CANL ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îî‚îÄ‚îÄ CANL
         
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –ö BLDC –º–æ—Ç–æ—Ä–∞–º (ID: 0x141-0x144)
```

### PCA9685 ‚Üí –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã

```
PCA9685 –ö–∞–Ω–∞–ª  ‚Üí  –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥
    0          ‚Üí  FL –ü–ª–µ—á–æ (–ü–µ—Ä–µ–¥–Ω—è—è –ª–µ–≤–∞—è)
    1          ‚Üí  FL –ë–µ–¥—Ä–æ
    2          ‚Üí  FR –ü–ª–µ—á–æ (–ü–µ—Ä–µ–¥–Ω—è—è –ø—Ä–∞–≤–∞—è)
    3          ‚Üí  FR –ë–µ–¥—Ä–æ
    4          ‚Üí  BL –ü–ª–µ—á–æ (–ó–∞–¥–Ω—è—è –ª–µ–≤–∞—è)
    5          ‚Üí  BL –ë–µ–¥—Ä–æ
    6          ‚Üí  BR –ü–ª–µ—á–æ (–ó–∞–¥–Ω—è—è –ø—Ä–∞–≤–∞—è)
    7          ‚Üí  BR –ë–µ–¥—Ä–æ
```

### PPM –ø—Ä–∏–µ–º–Ω–∏–∫

```
RC –ü—Ä–∏–µ–º–Ω–∏–∫
  PPM Out ‚îÄ‚îÄ‚îÄ‚ñ∫ ESP32 #2 GPIO 34
  GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ GND
  VCC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ 5V
```

## –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –æ–±–∞ ESP32 –∫ USB (–¥–ª—è –ø–∏—Ç–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏)
2. –û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud)
3. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

**ESP32 #1 (–ì–ª–∞–≤–Ω—ã–π):**
```
[MAIN] =============================================
[MAIN] ESP32 –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä StackForce —Ä–æ–±–æ—Ç–∞
[MAIN] =============================================
[MAIN] CAN —à–∏–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
[MAIN] CAN: TX=5, RX=4, Speed=1Mbps
[MAIN] PCA9685 –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
[MAIN] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
[MAIN] –û–∂–∏–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –æ—Ç PPM –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞...
```

**ESP32 #2 (PPM):**
```
[PPM] =============================================
[PPM] ESP32 PPM –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å IMU
[PPM] =============================================
[PPM] CAN —à–∏–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
[PPM] CAN: TX=5, RX=4, Speed=1Mbps
[PPM] MPU6050 –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
[PPM] PPM –ø—Ä–∏–µ–º–Ω–∏–∫ –Ω–∞ –ø–∏–Ω–µ 34
[PPM] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
[PPM] –û–∂–∏–¥–∞–Ω–∏–µ PPM —Å–∏–≥–Ω–∞–ª–∞...
```

### –®–∞–≥ 2: –¢–µ—Å—Ç CAN —Å–≤—è–∑–∏

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CAN —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∏—Ä—É—é—â–∏–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã 120–û–º
3. –í –ª–æ–≥–∞—Ö ESP32 #1 –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–∏–µ–º–µ –∫–æ–º–∞–Ω–¥

### –®–∞–≥ 3: –¢–µ—Å—Ç PPM

1. –í–∫–ª—é—á–∏—Ç–µ RC –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫
2. –ù–∞ ESP32 #2 –¥–æ–ª–∂–µ–Ω –∑–∞–≥–æ—Ä–µ—Ç—å—Å—è LED –Ω–∞ GPIO 16
3. –í Serial Monitor –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ:
   ```
   [PPM] T=0 S=0 M=128 Sp=128 | CH:[1500,1500,1500,1500]
   ```

### –®–∞–≥ 4: –¢–µ—Å—Ç IMU

1. –ù–∞–∫–ª–æ–Ω–∏—Ç–µ –ø–ª–∞—Ç—É ESP32 #2
2. –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏—è:
   ```
   [PPM] IMU: R=10.5¬∞ P=-5.2¬∞ Y=0.0¬∞ | Acc:[123,-45,980]
   ```

### –®–∞–≥ 5: –¢–µ—Å—Ç —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –∫ PCA9685 (5-6V)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã
3. –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ (90¬∞)
4. –ò–∑–º–µ–Ω—è–π—Ç–µ –∫–∞–Ω–∞–ª MODE –Ω–∞ RC –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–µ - –≤—ã—Å–æ—Ç–∞ —Å—Ç–æ–π–∫–∏ –¥–æ–ª–∂–Ω–∞ –º–µ–Ω—è—Ç—å—Å—è

### –®–∞–≥ 6: –¢–µ—Å—Ç –º–æ—Ç–æ—Ä–æ–≤

1. **–í–ê–ñ–ù–û:** –†–æ–±–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –ø–æ–¥—Å—Ç–∞–≤–∫–µ, –∫–æ–ª–µ—Å–∞ –Ω–µ –∫–∞—Å–∞—é—Ç—Å—è –∑–µ–º–ª–∏!
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –∫ BLDC –º–æ—Ç–æ—Ä–∞–º
3. –ü–æ–¥–∞–π—Ç–µ –≥–∞–∑ –Ω–∞ RC –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–µ
4. –ö–æ–ª–µ—Å–∞ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∞—Ç—å –≤—Ä–∞—â–∞—Ç—å—Å—è

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### CAN —Å–≤—è–∑—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CANH –∏ CANL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞—Ç–æ—Ä–æ–≤ 120–û–º –Ω–∞ –æ–±–æ–∏—Ö –∫–æ–Ω—Ü–∞—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—â–∏–π GND
- –ü–∏—Ç–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∏–≤–µ—Ä–æ–≤ 5V –∏–ª–∏ 3.3V (—Å–º–æ—Ç—Ä–∏—Ç–µ datasheet)

### PPM —Å–∏–≥–Ω–∞–ª –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PPM –∫ GPIO 34
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–µ–º–Ω–∏–∫ –≤ PPM —Ä–µ–∂–∏–º–µ (–Ω–µ PWM!)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ –ø—Ä–∏–µ–º–Ω–∏–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∏–Ω–¥ —Å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–æ–º

### MPU6050 –Ω–µ –Ω–∞–π–¥–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ I2C –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (SDA=21, SCL=22)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å I2C (0x68 –∏–ª–∏ 0x69)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ 3.3V

### –ú–æ—Ç–æ—Ä—ã –Ω–µ –≤—Ä–∞—â–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ BLDC –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ CAN ID (0x141-0x144)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CAN —Å–∫–æ—Ä–æ—Å—Ç—å (1 –ú–±–∏—Ç/—Å)

### –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã –Ω–µ –¥–≤–∏–≥–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ PCA9685 (V+ = 5-6V)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ I2C –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å PCA9685 (0x40)

## –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ PPM –∫–∞–Ω–∞–ª–æ–≤
–ò–∑–º–µ–Ω–∏—Ç–µ –≤ `config.h`:
```cpp
#define PPM_MIN_CHANNEL_VALUE 1000  // –ú–∏–Ω–∏–º—É–º –≤–∞—à–µ–≥–æ RC
#define PPM_MAX_CHANNEL_VALUE 2000  // –ú–∞–∫—Å–∏–º—É–º –≤–∞—à–µ–≥–æ RC
```

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤
–ò–∑–º–µ–Ω–∏—Ç–µ –≤ `config.h`:
```cpp
#define SERVO_MIN_PULSE 150   // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∏–º–ø—É–ª—å—Å–∞
#define SERVO_MAX_PULSE 600   // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∏–º–ø—É–ª—å—Å–∞
```

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ IMU
–ö–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑:
```cpp
#define IMU_FILTER_ALPHA 0.98  // 0.96-0.99 (–≤—ã—à–µ = –±–æ–ª—å—à–µ –¥–æ–≤–µ—Ä–∏—è –≥–∏—Ä–æ—Å–∫–æ–ø—É)
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:**
- –í—Å–µ–≥–¥–∞ –¥–µ—Ä–∂–∏—Ç–µ —Ä–æ–±–æ—Ç–∞ –Ω–∞ –ø–æ–¥—Å—Ç–∞–≤–∫–µ –ø—Ä–∏ –ø–µ—Ä–≤—ã—Ö —Ç–µ—Å—Ç–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤–∞—Ä–∏–π–Ω—ã–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –ø–∏—Ç–∞–Ω–∏—è
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∞–ª—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ PPM —Å–∏–≥–Ω–∞–ª–∞ —Ä–æ–±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ù–µ –ø—Ä–∏–∫–∞—Å–∞–π—Ç–µ—Å—å –∫ –≤—Ä–∞—â–∞—é—â–∏–º—Å—è —á–∞—Å—Ç—è–º

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –°—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
2. ‚úÖ –ü—Ä–æ—à–∏–≤–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
3. ‚úÖ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ
4. ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–≤–∏–∂–µ–Ω–∏—è –≤ `config.h`
- –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/HARDWARE.md`
- README –ø—Ä–æ–µ–∫—Ç–∞: `README.md`
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π: `firmware/*/include/config.h`

–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! ü§ñ
