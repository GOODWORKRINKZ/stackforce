# –¢–µ–æ—Ä–∏—è —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–ª–µ—Å–Ω–æ-–Ω–æ–≥–æ–≤–æ–≥–æ —Ä–æ–±–æ—Ç–∞

> –ü–µ—Ä–µ–≤–æ–¥ –∏ –∞–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ "ÁôªÂì•" (Deng Ge) –æ –ø—Ä–∏–Ω—Ü–∏–ø–µ —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

## üìπ –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–∏–¥–µ–æ

–ê–≤—Ç–æ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —á–µ—Ç—ã—Ä–µ—Ö–Ω–æ–≥–æ–≥–æ –∫–æ–ª–µ—Å–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞ —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∏ –±–µ–∑ –Ω–µ–≥–æ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Å–ª–æ–∂–Ω–æ–≥–æ —Ä–µ–ª—å–µ—Ñ–∞. **–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ** - —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º —Ä–æ–±–æ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–µ—Ä–æ–≤–Ω–æ—Å—Ç–∏ –∏ –ª–µ—Å—Ç–Ω–∏—Ü—ã.

---

## üéØ –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

> **"–†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≤—ã—Å–æ—Ç—ã –Ω–æ–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–ª—å–µ—Ñ–∞"**

–ö–æ–≥–¥–∞ —Ä–æ–±–æ—Ç –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ —Å–ª–æ–∂–Ω–æ–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, –≥–∏—Ä–æ—Å–∫–æ–ø (IMU) –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–∞–∫–ª–æ–Ω –∫–æ—Ä–ø—É—Å–∞ (—É–≥–æ–ª –∏ —É–≥–ª–æ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å). –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ **–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏**, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—á–∏—Å–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —É–¥–ª–∏–Ω–µ–Ω–∏–µ/—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–æ–≥ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±–∞–ª–∞–Ω—Å–∞.

---

## üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–Ω—Ü–∏–ø: –ö–∞—Å–∫–∞–¥–Ω—ã–π PID

### –ü—Ä–∏–º–µ—Ä: —Å–ø—É—Å–∫ –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ü–µ—Ä–µ–¥–Ω–∏–µ –Ω–æ–≥–∏ –∫–∞—Å–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—É–ø–µ–Ω—å–∫–∏
2. –ö–æ—Ä–ø—É—Å –Ω–∞–∫–ª–æ–Ω—è–µ—Ç—Å—è (pitch angle –∏ angular velocity)
3. –î–∞–Ω–Ω—ã–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –æ—Å–∏ Pitch (—Ç–∞–Ω–≥–∞–∂):

```
–®–∞–≥ 1: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —É–≥–ª–∞
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
angle_error = current_pitch - target_pitch(0¬∞)

–®–∞–≥ 2: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ü–µ–ª–µ–≤—É—é —É–≥–ª–æ–≤—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
target_angular_velocity = angle_error √ó Kp_angle

–®–∞–≥ 3: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —É–≥–ª–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
velocity_error = target_angular_velocity - current_angular_velocity

–®–∞–≥ 4: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã –Ω–æ–≥–∏
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
leg_extension_rate = velocity_error √ó Kp_velocity

–®–∞–≥ 5: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
leg_height += leg_extension_rate √ó dt
```

### –ö–æ–≥–¥–∞ —Ä–æ–±–æ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è:
- `angle_error ‚Üí 0` (—É–≥–æ–ª –≤—ã—Ä–æ–≤–Ω–µ–Ω)
- `velocity_error ‚Üí 0` (—É–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å = 0)
- `leg_extension_rate ‚Üí 0` (–Ω–æ–≥–∏ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è)
- **–†–æ–±–æ—Ç —É—Å—Ç–æ–π—á–∏–≤!**

---

## üíª –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ

### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Pitch (–∏–∑ –≤–∏–¥–µ–æ):

```cpp
// –§–æ—Ä–º—É–ª–∞ 1: –û—à–∏–±–∫–∞ —É–≥–ª–∞ ‚Üí —Ü–µ–ª–µ–≤–∞—è —É–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
float target_angular_velocity = Kp_angle * (0 - current_pitch);

// –§–æ—Ä–º—É–ª–∞ 2: –û—à–∏–±–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ ‚Üí —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã
float leg_extension_rate = Kp_velocity * (target_angular_velocity - current_pitch_rate);

// –§–æ—Ä–º—É–ª–∞ 3: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –Ω–æ–≥–∏
leg_Y_coordinate += leg_extension_rate;
```

### –ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (main.cpp):

```cpp
// ‚úÖ PID –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è pitch (—Ç–∞–Ω–≥–∞–∂)
PIDController PID_PITCH{0.38, 0, 0, 1000, 50};

// ‚úÖ –ß—Ç–µ–Ω–∏–µ IMU
robotPose.pitch = -mpu6050.angle[0];
robotPose.roll = mpu6050.angle[1];

// ‚úÖ –ö–∞—Å–∫–∞–¥–Ω—ã–π PID: —Å–∫–æ—Ä–æ—Å—Ç—å ‚Üí —Ü–µ–ª–µ–≤–æ–π —É–≥–æ–ª ‚Üí –º–æ–º–µ–Ω—Ç
float targetAngle = PID_VEL(targetSpeed - speedAvg);
float torque = PID_PITCH(targetAngle - robotPose.pitch);

// ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã –Ω–æ–≥ –ø–æ –∫—Ä–µ–Ω—É (roll)
stab_roll = stab_roll + Kp_roll * (0 - robotPose.roll);
float L_Height = Y + stab_roll;  // –õ–µ–≤–∞—è –Ω–æ–≥–∞
float R_Height = Y - stab_roll;  // –ü—Ä–∞–≤–∞—è –Ω–æ–≥–∞
```

---

## üîÑ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä Roll (–∫—Ä–µ–Ω)

–ê–≤—Ç–æ—Ä –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–µ—Ç, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –æ—Å–∏ Roll **–∏–¥–µ–Ω—Ç–∏—á–µ–Ω** - –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ pitch –∏ –º–µ–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

### –í–∏–¥–µ–æ:
```cpp
// –ö–æ–ø–∏—Ä—É–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º pitch –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º roll
float roll_target_velocity = Kp_angle * (0 - current_roll);
float roll_extension_rate = Kp_velocity * (roll_target_velocity - current_roll_rate);
leg_left_height += roll_extension_rate;   // –õ–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞
leg_right_height -= roll_extension_rate;  // –ü—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ (–ø—Ä–æ—Ç–∏–≤–æ—Ñ–∞–∑–∞)
```

### –ù–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
```cpp
// ‚úÖ PID –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è roll
PIDController PID_ROLL{0.05, 0, 0, 1000, 50};

// ‚úÖ –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –∫—Ä–µ–Ω–∞
stab_roll = stab_roll + Kp_roll * (0 - robotPose.roll);

// ‚úÖ –ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –ª–µ–≤–æ–π/–ø—Ä–∞–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
float L_Height = Y + stab_roll;  // + –¥–ª—è –ª–µ–≤–æ–π
float R_Height = Y - stab_roll;  // - –¥–ª—è –ø—Ä–∞–≤–æ–π
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–∏–¥–µ–æ

| –≠–ª–µ–º–µ–Ω—Ç | –í–∏–¥–µ–æ (ÁôªÂì•) | –ù–∞—à –∫–æ–¥ | –°—Ç–∞—Ç—É—Å |
|---------|-------------|---------|--------|
| IMU (–≥–∏—Ä–æ—Å–∫–æ–ø) | MPU6050 | MPU6050 | ‚úÖ –°–æ–≤–ø–∞–¥–∞–µ—Ç |
| –ö–∞—Å–∫–∞–¥–Ω—ã–π PID | –£–≥–æ–ª ‚Üí –°–∫–æ—Ä–æ—Å—Ç—å ‚Üí –í—ã—Å–æ—Ç–∞ | VEL ‚Üí PITCH ‚Üí Torque | ‚úÖ –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ |
| Pitch —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è | –ß–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ Y | –ß–µ—Ä–µ–∑ –º–æ—Ç–æ—Ä—ã + Y | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Roll —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è | L/R –≤—ã—Å–æ—Ç–∞ –Ω–æ–≥ | `stab_roll` ¬± Y | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä | –ù–µ —É–∫–∞–∑–∞–Ω | StackForce (ESP32-S3) | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã | `leg_Y += rate` | `stab_roll += Kp * error` | ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π PID |

---

## üéì –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏–∑ –≤–∏–¥–µ–æ

### 1. **–ü–æ—á–µ–º—É –Ω—É–∂–Ω–∞ —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è?**
> "–û–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–∞–µ—Ç —Ä–æ–±–æ—Ç—É –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à—É—é –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å"

–ë–µ–∑ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ä–æ–±–æ—Ç —Ç–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å –Ω–∞ –Ω–µ—Ä–æ–≤–Ω–æ—Å—Ç—è—Ö –∏ –ª–µ—Å—Ç–Ω–∏—Ü–∞—Ö.

### 2. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π PID (Â¢ûÈáèPID)**
> "–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∞–º–æ—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ PID. –ï–≥–æ –≤—ã—Ö–æ–¥ - —ç—Ç–æ –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã—Å–æ—Ç—ã –Ω–æ–≥–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–æ—Ä–ø—É—Å–∞"

–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ PID - **–Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è**, –∞ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

### 3. **–¶–∏–∫–ª–∏—á–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π**
> "–≠—Ç—É —Ñ–æ—Ä–º—É–ª—É –Ω—É–∂–Ω–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤ —Ü–∏–∫–ª–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å –¥–∞—Ç—á–∏–∫–æ–≤, –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –≤ —Ñ–æ—Ä–º—É–ª—É, –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–µ –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –≤—ã—Å–æ—Ç–µ –Ω–æ–≥–∏"

–í –Ω–∞—à–µ–º –∫–æ–¥–µ —ç—Ç–æ `loop()` —Å —á–∞—Å—Ç–æ—Ç–æ–π 200 Hz.

### 4. **–£—Å–ª–æ–≤–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏**
> "–ö–æ–≥–¥–∞ –±–∞–ª–∞–Ω—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –æ—à–∏–±–∫–∞ —É–≥–ª–∞ –≤ –ø–µ—Ä–≤–æ–π —Ñ–æ—Ä–º—É–ª–µ = 0, –æ—à–∏–±–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–æ –≤—Ç–æ—Ä–æ–π —Ñ–æ—Ä–º—É–ª–µ = 0, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏—Ä–∞—â–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã = 0, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–æ–≥–∏ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è, —Ä–æ–±–æ—Ç —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è"

---

## üõ†Ô∏è –ß—Ç–æ –µ—Å—Ç—å –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. **–ö–∞—Å–∫–∞–¥–Ω—ã–π PID** –¥–ª—è pitch (—Å–∫–æ—Ä–æ—Å—Ç—å ‚Üí —É–≥–æ–ª ‚Üí –º–æ–º–µ–Ω—Ç)
2. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** –∫—Ä–µ–Ω–∞ —á–µ—Ä–µ–∑ `stab_roll`
3. **–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤—ã—Å–æ—Ç–æ–π –ª–µ–≤—ã—Ö/–ø—Ä–∞–≤—ã—Ö –Ω–æ–≥
4. **–ß—Ç–µ–Ω–∏–µ IMU** –Ω–∞ 200 Hz
5. **–û–±—Ä–∞—Ç–Ω–∞—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∞** –¥–ª—è –≤—Å–µ—Ö 4 –Ω–æ–≥ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
6. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫—Ä–µ–Ω–∞** `rollLimit = 20¬∞`

### ‚ö†Ô∏è –û—Ç–ª–∏—á–∏—è –æ—Ç –≤–∏–¥–µ–æ:

**–í–∏–¥–µ–æ**: –ü—Ä—è–º–∞—è —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –≤—ã—Å–æ—Ç—ã Y —á–µ—Ä–µ–∑ PID  
**–ù–∞—à –∫–æ–¥**: –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –º–æ–º–µ–Ω—Ç–∞ –º–æ—Ç–æ—Ä–æ–≤ + –∫–æ—Ä—Ä–µ–∫—Ü–∏—è Y

–≠—Ç–æ **—Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã** –∫ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–µ:
- –í–∏–¥–µ–æ: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç–æ–π –Ω–æ–≥ –Ω–∞–ø—Ä—è–º—É—é (pure leg-wheeled)
- –ú—ã: –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∫–æ–ª–µ—Å–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ + –∞–¥–∞–ø—Ç–∞—Ü–∏—è –Ω–æ–≥ (hybrid)

### üîß –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å **–ø—Ä—è–º–æ–π PID –¥–ª—è –≤—ã—Å–æ—Ç—ã** –∫–∞–∫ –≤ –≤–∏–¥–µ–æ:

```cpp
// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—ã—Å–æ—Ç—ã –ø–æ pitch
PIDController PID_HEIGHT_PITCH{0.5, 0, 0.1, 50, 50};

// –í loop():
float height_correction_pitch = PID_HEIGHT_PITCH(0 - robotPose.pitch);
Y += height_correction_pitch;  // –ü—Ä—è–º–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –≤—ã—Å–æ—Ç—ã
```

---

## üì¶ –û—Ç–∫—Ä—ã—Ç—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–∏–∑ –≤–∏–¥–µ–æ)

–ê–≤—Ç–æ—Ä —É–ø–æ–º–∏–Ω–∞–µ—Ç:
- –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –≤–∏–¥–µ–æ (Gitee)
- –î–æ—Å—Ç—É–ø–Ω—ã: –º–µ—Ö–∞–Ω–∏–∫–∞, —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, –∫–æ–¥
- –ú–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –≥–æ—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –Ω–∞ Taobao (–º–∞–≥–∞–∑–∏–Ω "StackForce")

**–ù–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—É –∂–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É StackForce!**

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–∞—à –∫–æ–¥ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç** –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏–∑ –≤–∏–¥–µ–æ:

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º IMU –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–∫–ª–æ–Ω–∞
2. ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Å–∫–∞–¥–Ω—ã–π PID
3. ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –≤—ã—Å–æ—Ç—É –Ω–æ–≥
4. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º pitch –∏ roll –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
5. ‚úÖ –¶–∏–∫–ª 200 Hz –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–∫—Ü–∏–∏

**–†–∞–∑–Ω–∏—Ü–∞** –≤ —Ç–æ–º, —á—Ç–æ –º—ã –∫–æ–º–±–∏–Ω–∏—Ä—É–µ–º —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ –º–æ—Ç–æ—Ä—ã –ò –Ω–æ–≥–∏, —á—Ç–æ –º–æ–∂–µ—Ç –¥–∞—Ç—å –¥–∞–∂–µ –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö.

---

## üîó –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫ (–∏–∑ –≤–∏–¥–µ–æ)

> "–í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –º—ã –æ–±—ä—è—Å–Ω–∏–º –ø—Ä–∏–Ω—Ü–∏–ø –≤—ã—Å–æ–∫–æ–π –º–∞–Ω–µ–≤—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —á–µ—Ç—ã—Ä–µ—Ö–Ω–æ–≥–æ–≥–æ —Ä–æ–±–æ—Ç–∞ –∑–∞ —Å—á–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–ª–µ—Å –∏ –Ω–æ–≥"

–≠—Ç–æ —É—Ä–æ–∫ 9 –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤: `lesson9_enhance` - –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –º–∞–Ω–µ–≤—Ä–µ–Ω–Ω–æ—Å—Ç—å!
