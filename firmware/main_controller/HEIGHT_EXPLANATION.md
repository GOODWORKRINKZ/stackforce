# Система координат и высота Y

## Геометрия 5-звенного механизма ноги

```
                    [ТЕЛО РОБОТА]
                          |
                    Точка крепления (0,0)
                          |
                         L1 (60mm) - Верхнее плечо
                          |
                      [Сустав 1] ← SERVO (SHOULDER/плечо)
                          |
                         L2 (100mm) - Верхнее бедро
                          |
                      [Коленный сустав]
                          |
                         L3 (100mm) - Нижнее бедро
                          |
                      [Сустав 2] ← SERVO (HIP/бедро)
                          |
                         L4 (60mm) - Нижнее плечо
                          |
                    [ТОЧКА КОНТАКТА] (X, Y)
                          |
                      [КОЛЕСО]
```

## Система координат

**Точка отсчета (0, 0)** - точка крепления ноги к телу робота

**Ось X** - горизонтальное смещение (мм):
- X > 0 - нога вытянута вперед
- X < 0 - нога отклонена назад
- X = 0 - нога строго вертикально вниз

**Ось Y** - вертикальная высота (мм):
- Y = 0 - точка контакта на уровне крепления (невозможно)
- Y = 90 - **стандартная высота** (нога умеренно согнута)
- Y = 130 - максимальная высота (нога максимально разогнута)
- Y = 70 - минимальная высота (нога сильно согнута)

## Что означает Y в коде

```cpp
float Y = 90;        // Текущая высота: расстояние от точки крепления до точки контакта
float Y_demand = 90; // Желаемая высота
```

**Y измеряется:**
- **ОТ:** точки крепления ноги к телу робота (центр верхнего сервопривода)
- **ДО:** точки контакта ноги с землей (там где колесо касается пола)

## Диапазоны высоты

Определены в `quadrupedal_data.h`:

```cpp
#define ROBOT_HIGHEST 130           // Максимум: нога почти прямая
#define ROBOT_LOWEST_FOR_MOT 70     // Минимум для движения
#define ROBOT_LOWEST_FOR_CAL 70     // Минимум для калибровки
```

### Визуализация высот:

```
Y = 130 (максимум)              [ТЕЛО]
  |                                 |
  |                              почти
  |                             прямая
  |                               нога
  |                                 |
  |_____________________________ [КОЛЕСО]
  
  
Y = 90 (стандарт)               [ТЕЛО]
  |                                 |
  |                              средний
  |                               сгиб
  |                                 |
  |_________________ [КОЛЕСО]
  
  
Y = 70 (минимум)                [ТЕЛО]
  |                                 |
  |                             сильно
  |                             согнута
  |                                 |
  |______ [КОЛЕСО]
```

## Практическое значение

Если **Y = 90 мм**, это значит:
- От оси верхнего сервопривода (крепление к телу)
- До точки, где нога касается земли
- Расстояние составляет **90 миллиметров**

**Это НЕ высота тела над полом!**
Высота тела = Y + высота крепления + радиус колеса

## Использование в коде

```cpp
IKParam.YLeft = 90;   // Левая нога: 90мм от крепления до земли
IKParam.YRight = 90;  // Правая нога: 90мм от крепления до земли
```

Обратная кинематика рассчитывает углы сервоприводов, чтобы достичь этой высоты.
